(function(){var e=function(t,n){var r=e.resolve(t,n||"/"),i=e.modules[r];if(!i)throw new Error("Failed to resolve module "+t+", tried "+r);var s=e.cache[r],o=s?s.exports:i();return o};e.paths=[],e.modules={},e.cache={},e.extensions=[".js",".coffee",".json"],e._core={assert:!0,events:!0,fs:!0,path:!0,vm:!0},e.resolve=function(){return function(t,n){function u(t){t=r.normalize(t);if(e.modules[t])return t;for(var n=0;n<e.extensions.length;n++){var i=e.extensions[n];if(e.modules[t+i])return t+i}}function a(t){t=t.replace(/\/+$/,"");var n=r.normalize(t+"/package.json");if(e.modules[n]){var i=e.modules[n](),s=i.browserify;if(typeof s=="object"&&s.main){var o=u(r.resolve(t,s.main));if(o)return o}else if(typeof s=="string"){var o=u(r.resolve(t,s));if(o)return o}else if(i.main){var o=u(r.resolve(t,i.main));if(o)return o}}return u(t+"/index")}function f(e,t){var n=l(t);for(var r=0;r<n.length;r++){var i=n[r],s=u(i+"/"+e);if(s)return s;var o=a(i+"/"+e);if(o)return o}var s=u(e);if(s)return s}function l(e){var t;e==="/"?t=[""]:t=r.normalize(e).split("/");var n=[];for(var i=t.length-1;i>=0;i--){if(t[i]==="node_modules")continue;var s=t.slice(0,i+1).join("/")+"/node_modules";n.push(s)}return n}n||(n="/");if(e._core[t])return t;var r=e.modules.path();n=r.resolve("/",n);var i=n||"/";if(t.match(/^(?:\.\.?\/|\/)/)){var s=u(r.resolve(i,t))||a(r.resolve(i,t));if(s)return s}var o=f(t,i);if(o)return o;throw new Error("Cannot find module '"+t+"'")}}(),e.alias=function(t,n){var r=e.modules.path(),i=null;try{i=e.resolve(t+"/package.json","/")}catch(s){i=e.resolve(t,"/")}var o=r.dirname(i),u=(Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t})(e.modules);for(var a=0;a<u.length;a++){var f=u[a];if(f.slice(0,o.length+1)===o+"/"){var l=f.slice(o.length);e.modules[n+l]=e.modules[o+l]}else f===o&&(e.modules[n]=e.modules[o])}},function(){var t={},n=typeof window!="undefined"?window:{},r=!1;e.define=function(i,s){!r&&e.modules.__browserify_process&&(t=e.modules.__browserify_process(),r=!0);var o=e._core[i]?"":e.modules.path().dirname(i),u=function(t){var n=e(t,o),r=e.cache[e.resolve(t,o)];return r&&r.parent===null&&(r.parent=a),n};u.resolve=function(t){return e.resolve(t,o)},u.modules=e.modules,u.define=e.define,u.cache=e.cache;var a={id:i,filename:i,exports:{},loaded:!1,parent:null};e.modules[i]=function(){return e.cache[i]=a,s.call(a.exports,u,a,a.exports,o,i,t,n),a.loaded=!0,a.exports}}}(),e.define("path",function(e,t,n,r,i,s,o){function u(e,t){var n=[];for(var r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}function a(e,t){var n=0;for(var r=e.length;r>=0;r--){var i=e[r];i=="."?e.splice(r,1):i===".."?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var f=/^(.+\/(?!$)|\/)?((?:.+?)?(\.[^.]*)?)$/;n.resolve=function(){var e="",t=!1;for(var n=arguments.length;n>=-1&&!t;n--){var r=n>=0?arguments[n]:s.cwd();if(typeof r!="string"||!r)continue;e=r+"/"+e,t=r.charAt(0)==="/"}return e=a(u(e.split("/"),function(e){return!!e}),!t).join("/"),(t?"/":"")+e||"."},n.normalize=function(e){var t=e.charAt(0)==="/",n=e.slice(-1)==="/";return e=a(u(e.split("/"),function(e){return!!e}),!t).join("/"),!e&&!t&&(e="."),e&&n&&(e+="/"),(t?"/":"")+e},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(u(e,function(e,t){return e&&typeof e=="string"}).join("/"))},n.dirname=function(e){var t=f.exec(e)[1]||"",n=!1;return t?t.length===1||n&&t.length<=3&&t.charAt(1)===":"?t:t.substring(0,t.length-1):"."},n.basename=function(e,t){var n=f.exec(e)[2]||"";return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){return f.exec(e)[3]||""}}),e.define("__browserify_process",function(e,t,n,r,i,s,o){var s=t.exports={};s.nextTick=function(){var e=typeof window!="undefined"&&window.setImmediate,t=typeof window!="undefined"&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var n=[];return window.addEventListener("message",function(e){if(e.source===window&&e.data==="browserify-tick"){e.stopPropagation();if(n.length>0){var t=n.shift();t()}}},!0),function(t){n.push(t),window.postMessage("browserify-tick","*")}}return function(t){setTimeout(t,0)}}(),s.title="browser",s.browser=!0,s.env={},s.argv=[],s.binding=function(t){if(t==="evals")return e("vm");throw new Error("No such module. (Possibly not yet loaded)")},function(){var t="/",n;s.cwd=function(){return t},s.chdir=function(r){n||(n=e("path")),t=n.resolve(r,t)}}()}),e.define("/collection.coffee",function(e,t,n,r,i,s,o){(function(){var t,r,i,s,o=function(e,t){return function(){return e.apply(t,arguments)}},u={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};s=e("./view").View,i=e("./util"),n.Collection=r=function(e){function t(){return this.draw=o(this.draw,this),this.createView=o(this.createView,this),this.refresh=o(this.refresh,this),this.afterRender=o(this.afterRender,this),this.release=o(this.release,this),this.init=o(this.init,this),t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.tag="ul",t.prototype.skipTemplate=!0,t.prototype.init=function(){var e,n;return t.__super__.init.apply(this,arguments),i.log("collection","init"),this.itemViews={},this.filterAttribute!=null&&(this.bind("change:filterAttribute",this.draw),this.bind("change:filterText",this.draw)),this.sortAttribute!=null&&(this.bind("change:sortAttribute",this.draw),this.bind("change:sortDescending",this.draw)),this.pageSize==null&&this.set("pageSize",1e4),this.pageCurrent==null&&this.set("pageCurrent",0),this.bind("change:pageSize",this.draw),this.bind("change:pageCurrent",this.draw),(n=this.method)==null&&(this.method="all"),this.bind("change:collection",this.afterRender),this.bind("change:method",this.afterRender),typeof (e=this.collection).bind=="function"?e.bind("change",this.afterRender):void 0},t.prototype.release=function(){var e;return typeof (e=this.collection).unbind=="function"&&e.unbind("change",this.afterRender),t.__super__.release.apply(this,arguments)},t.prototype.afterRender=function(){return this.refresh(),this.draw()},t.prototype.refresh=function(){var e,t,n,r,s,o,u,a,f,l;i.log("collection","refresh");if(this.collection[this.method+"AsMap"]!=null)this.dataSet=this.collection[this.method+"AsMap"]();else{this.dataSet={},u=this.collection;for(s=0,o=u.length;s<o;s++)t=u[s],this.dataSet[t.id]=t}n=[],a=this.itemViews;for(e in a)r=a[e],this.dataSet[e]==null&&n.push(e);l=[];while(n.length>0)e=n.pop(),i.log("collection","destroyView",e,this.itemViews[e]),this.removeView(this.itemViews[e]),(f=this.itemViews[e].element)!=null&&f.remove(),this.layout.queueReleaseView(this.itemViews[e]),l.push(delete this.itemViews[e]);return l},t.prototype.createView=function(e){var t,n;return i.log("collection","createView",e,"layout",this.layout.rootElement),t={content:e,parent:this},this.viewClass===s&&(t.tag="li"),this.viewClassTemplateName!=null&&(t.templateName=this.viewClassTemplateName),this.viewClassTemplateFunction!=null&&(t.templateFunction=this.viewClassTemplateFunction),this.collectionTag!=null&&(t.tag=this.collectionTag),this.collectionClassNames!=null&&(t.classNames=this.collectionClassNames),this.tooltips!=null&&(t.tooltips=this.tooltips),n=this.layout.createView(this.viewClass,t),this.element.append(n.createElement()),this.itemViews[e.id]=n,this.addView(n),this.layout.queueRenderView(n)},t.prototype.draw=function(){var e,t,n,r,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S;y=this.itemViews;for(s in y)l=y[s],(b=l.element)!=null&&b.detach();this.displayOrder=_(this.dataSet).values(),this.hidden={},this.sortAttribute!=null&&i.sortBy(this.displayOrder,this.sortAttribute),this.sortDescending&&this.displayOrder.reverse();if(this.filterText!=null&&this.filterAttribute!=null&&this.filterText.length>0){u=this.filterText.toString().toLowerCase(),w=this.displayOrder;for(h=0,v=w.length;h<v;h++){o=w[h],r=!0,E=this.filterAttribute.split(",");for(p=0,m=E.length;p<m;p++)n=E[p],c=i.getPath(o,n),c!=null&&(r=r&&c.toString().toLowerCase().indexOf(u)===-1),r&&(this.hidden[o.id]=1)}}a=this.pageCurrent*this.pageSize,e=0,f=0,t=0,S=this.displayOrder;for(d=0,g=S.length;d<g;d++)o=S[d],this.hidden[o.id]==null&&(e<a||t>=this.pageSize||(this.itemViews[o.id]==null&&this.createView(o),this.element.append(this.itemViews[o.id].element),t++),f++),e++;this.set("pageTotal",Math.ceil(f/this.pageSize));if(this.pageCurrent>this.pageTotal)return this.set("pageCurrent",this.pageTotal-1)},t}(s),n.BoundView=t=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.init=function(){return t.__super__.init.apply(this,arguments),this.content.bind("change",this.redraw)},t.prototype.release=function(){return this.content.unbind("change",this.redraw),t.__super__.release.apply(this,arguments)},t}(s)}).call(this)}),e.define("/view.coffee",function(e,t,n,r,i,s,o){(function(){var t,r,i,s=function(e,t){return function(){return e.apply(t,arguments)}},o={}.hasOwnProperty,u=function(e,t){function r(){this.constructor=e}for(var n in t)o.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};t=e("./object").MztObject,r=e("./util"),n.View=i=function(e){function t(){return this.copyHtmlAttrsToElement=s(this.copyHtmlAttrsToElement,this),this.getHtmlAttrsMap=s(this.getHtmlAttrsMap,this),this.createElement=s(this.createElement,this),this.release=s(this.release,this),this.hasAncestor=s(this.hasAncestor,this),this.removeView=s(this.removeView,this),this.namedChildViewExists=s(this.namedChildViewExists,this),this.childView=s(this.childView,this),this.addView=s(this.addView,this),this.redraw=s(this.redraw,this),this.postRender=s(this.postRender,this),this.replaceElement=s(this.replaceElement,this),this.findElementInPreparedContent=s(this.findElementInPreparedContent,this),this.reassignElements=s(this.reassignElements,this),this.prepareElement=s(this.prepareElement,this),this.init=s(this.init,this),t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.tag="div",t.prototype.disableHtmlAttributes=!1,t.prototype.idPrefix="view",t.prototype.init=function(){var e,t,n;return(e=this.id)==null&&(this.id=""+this.idPrefix+"-"+this._mozartId),this.childViews={},(t=this.context)==null&&(this.context={}),this.namedChildViews={},this.valid=!0,this.domBindings={},(n=this.display)==null&&(this.display=!0),this.parent!=null&&this.parent.addView(this),this.templateFunction==null&&this.skipTemplate==null&&(this.templateName==null&&r.error("View: View has no templateName or templateFunction","view",this),this.templateFunction=HandlebarsTemplates[this.templateName]),r.log("views","view "+this.id+" init"),this.bind("change:display",this.redraw)},t.prototype.prepareElement=function(){if(this.released)return;this.newElement=this.createElement();if(!this.skipTemplate&&this.display)return this.newElement.innerHTML=this.templateFunction(this,{data:this})},t.prototype.reassignElements=function(){var e,t,n;n=this.childViews;for(e in n)t=n[e],t.reassignElements();if(this.parent!=null)return this.el=this.parent.findElementInPreparedContent(this.id)},t.prototype.findElementInPreparedContent=function(e){var t;return this.newElement?(t=this._find(this.newElement,e),t):null},t.prototype._find=function(e,t){var n,r,i,s,o;if(e.id===t)return e;o=e.children;for(i=0,s=o.length;i<s;i++){n=o[i],r=this._find(n,t);if(r!=null)return r}return null},t.prototype.replaceElement=function(){var e,t,n;if(this.released)return;if(!this.el)return;n=this.childViews;for(e in n)t=n[e],t.replaceElement();return this.el!==this.newElement&&(this.oldEl=this.el,this.el.parentNode.replaceChild(this.newElement,this.el),this.layout!=null&&this.el===this.layout.rootEl&&(this.layout.rootEl=this.newElement),this.el=this.newElement,delete this.oldEl),this.element=$(this.el)},t.prototype.beforeRender=function(){},t.prototype.afterRender=function(){},t.prototype.postRender=function(){if(this.released)return;return this.createDomBinds(),this.afterRender()},t.prototype.redraw=function(){if(this.released)return;return this.layout.queueRenderView(this)},t.prototype.addView=function(e){this.childViews[e.id]=e;if(e.name!=null)return this.namedChildViews[e.name]=e},t.prototype.childView=function(e){return this.namedChildViews[e]},t.prototype.namedChildViewExists=function(e){return this.namedChildViews[e]!=null},t.prototype.releaseChildren=function(){var e,t,n;n=this.childViews;for(e in n)t=n[e],this.layout.queueReleaseView(t);return this.childViews={},this.namedChildViews={}},t.prototype.removeView=function(e){if(this.childViews!=null)return delete this.childViews[e.id]},t.prototype.hasAncestor=function(e){var t;t=this.parent;while(t!=null){if(t.id===e.id)return!0;t=t.parent}return!1},t.prototype.release=function(){if(this.released)return;return r.log("views",this.layout,"releasing view "+this.id),this.removeDomBinds(),this.unbind(),this.parent!=null&&this.parent.removeView(this),this.releaseChildren(),this.layout.releaseView(this),t.__super__.release.apply(this,arguments)},t.prototype.createElement=function(){var e,t,n,r;if(this.display===!1)return e=document.createElement("script"),e.setAttribute("id",this.id),e;e=document.createElement(this.tag),e.setAttribute("id",this.id),e.setAttribute("view","");if(!this.disableHtmlAttributes){r=this.getHtmlAttrsMap();for(t in r)n=r[t],e.setAttribute(t,n)}return e},t.prototype.getHtmlAttrsMap=function(){var e,t,n;t={};for(e in this)n=this[e],typeof this[e]=="string"&&r.stringEndsWith(e,"Html")&&(t[r.sliceStringBefore(e,"Html")]=n);return t},t.prototype.copyHtmlAttrsToElement=function(e){return e.attr(this.getHtmlAttrsMap()),e},t.prototype.registerDomBind=function(e,t){var n,i,s,o;return o=r.parsePath(t),s=o[0],n=o[1],s!=null?i=r.getPath(this,s):i=this,i==null&&r.error("View.registerDomBind (bind helper) - cannot find object "+s),this.domBindings[e]={view:this,target:i,attribute:n,element:null}},t.prototype.createDomBinds=function(){var e,t,n,i;n=this.domBindings,i=[];for(e in n){t=n[e];if(t.element!==null)continue;t.element=$("#"+e),t.element==null&&r.error("View.createDomBinds - cannot find element "+e),t.targetsynapse=new Synapse(t.target),t.elementsynapse=new Synapse(t.element[0]),i.push(t.elementsynapse.observe(t.targetsynapse,t.attribute))}return i},t.prototype.removeDomBinds=function(){var e,t,n;n=this.domBindings;for(e in n)t=n[e],t.element===!0&&t.elementsynapse.stopSyncWith(t.targetsynapse);return this.domBindings={}},t}(t)}).call(this)}),e.define("/object.coffee",function(e,t,n,r,i,s,o){(function(){var t,r,i,s,o=function(e,t){return function(){return e.apply(t,arguments)}},u=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},a={}.hasOwnProperty,f=[].slice;s=e("./util"),t=e("./events").Events,i=e("./synapse").Synapse,n.MztObject=r=function(){function c(){this.unbind=o(this.unbind,this),this.trigger=o(this.trigger,this),this.one=o(this.one,this),this.bind=o(this.bind,this),this.set=o(this.set,this),this.get=o(this.get,this),this._mozartId=s.getId()}var e,n,r,l;return l=0,r=1,n=2,e=["extended","included"],c.include=function(t){var n,r,i;for(n in t)r=t[n],u.call(e,n)<0&&(this[n]=r);return(i=t.extended)!=null&&i.apply(this),this},c.extend=function(t){var n,r,i;for(n in t)r=t[n],u.call(e,n)<0&&(this.prototype[n]=r);return(i=t.included)!=null&&i.apply(this),this},c.create=function(e){var t,n,r;t=new this,t._mozartId=s.getId(),t._pathCount=0,t._paths={};for(n in e)r=e[n],t[n]=r;return t._synapse=new i(t),t.createDeclaredBinds(),t.createLookups(),typeof t.init=="function"&&t.init(),t},c.prototype.toString=function(){return"obj-"+this._mozartId},c.prototype.get=function(e){return s.isFunction(this[e])?this[e]():this[e]},c.prototype.set=function(e,t){var n;if(typeof this[e]=="function")throw new Error("Cannot set a function");if(t===null||t instanceof c){n=this[e];if(n!=null&&n instanceof c&&n._paths[this]!==void 0){this._removePath(e,n);if(n._pathCount===0)if(t===null){if(_(n._synapse._notifying).keys().length>0||_(n._synapse._observing).keys().length>0)throw new Error("Cannot set a value with bindings to null")}else n._synapse.transferAllSync(t._synapse)}this[e]=t,t!=null&&this._addPath(e,t)}else this[e]=t;if(n!==t)return this.trigger("change"),this.trigger("change:"+e)},c.prototype.createDeclaredBinds=function(){var e,t,i,o,u,a,f,c;c=[];for(t in this){a=this[t];if(!!s.isFunction(this[t])||!s.stringEndsWith(t,"Binding"))continue;t=s.sliceStringBefore(t,"Binding"),u=l,s.stringEndsWith(t,"Observe")?(t=s.sliceStringBefore(t,"Observe"),u=r):s.stringEndsWith(t,"Notify")&&(t=s.sliceStringBefore(t,"Notify"),u=n);if(this[t]==null){this[t]=null,f=s.parsePath(a),o=f[0],e=f[1];if(o!=null)if(o==="this"){if(this.context==null)throw new Error("createDeclaredBinds - cannot use a 'this' binding on an object with no context");i=this.context}else this.parent!=null?i=s.getPath(this.parent,o):i=s.getPath(o);else{if(this.parent==null)throw new Error("createDeclaredBinds - a property is bound on parent when parent does not exist");i=this.parent}if(i==null)throw new Error("createDeclaredBinds - cannot find object '"+a+"'");switch(u){case l:c.push(this._synapse.syncWith(i,t,e));break;case r:c.push(this._synapse.observe(i,e,t));break;case n:c.push(this._synapse.notify(i,t,e));break;default:c.push(void 0)}}else c.push(void 0)}return c},c.prototype.createLookups=function(){var e,t,n;n=[];for(e in this){t=this[e];if(!!s.isFunction(this[e])||!s.stringEndsWith(e,"Lookup"))continue;e=s.sliceStringBefore(e,"Lookup"),n.push(this[e]=s._getPath(t))}return n},c.prototype._addPath=function(e,t){if(t._paths[this]==null)return t._paths[this]=e,t._pathCount++},c.prototype._removePath=function(e,t){return delete t._paths[this],t._pathCount--},c.prototype.release=function(){var e,t;if(this.released)return;this.unbind(),this._synapse.destroy();for(e in this){if(!a.call(this,e))continue;t=this[e],this[e]=void 0,delete this[e]}return this.released=!0},c.prototype.bind=function(){var e;return e=1<=arguments.length?f.call(arguments,0):[],t.bind.apply(t,[this._mozartId].concat(f.call(e))),this},c.prototype.one=function(){var e;return e=1<=arguments.length?f.call(arguments,0):[],t.one.apply(t,[this._mozartId].concat(f.call(e))),this},c.prototype.trigger=function(){var e;return e=1<=arguments.length?f.call(arguments,0):[],s.log.apply(s,["events",this,"triggering"].concat(f.call(e))),t.trigger.apply(t,[this._mozartId].concat(f.call(e))),this},c.prototype.unbind=function(){var e;return e=1<=arguments.length?f.call(arguments,0):[],t.unbind.apply(t,[this._mozartId].concat(f.call(e))),this},c}()}).call(this)}),e.define("/util.coffee",function(e,t,n,r,i,s,o){(function(){var e,n,r,i=[].slice,s=this;r={},n=0,e=t.exports={toString:Object.prototype.toString,getType:function(e){return this.toString.call(e).match(/^\[object\s(.*)\]$/)[1]},isObject:function(e){return this.getType(e)==="Object"},isFunction:function(e){return this.getType(e)==="Function"},isArray:function(e){return this.getType(e)==="Array"},isString:function(e){return this.getType(e)==="String"},isBoolean:function(e){return this.getType(e)==="Boolean"},log:function(){var e,t;t=arguments[0],e=2<=arguments.length?i.call(arguments,1):[];if(r[t]!=null&&typeof console!="undefined"&&console!==null)return console.log.apply(console,[t+":"].concat(i.call(e)))},showLog:function(e){return r[e]=!0},hideLog:function(e){return r[e]=!1},error:function(){var e,t;throw t=arguments[0],e=2<=arguments.length?i.call(arguments,1):[],typeof console!="undefined"&&console!==null&&console.error("Exception:",t,e),t},warn:function(){var e,t;t=arguments[0],e=2<=arguments.length?i.call(arguments,1):[];if(typeof console!="undefined"&&console!==null)return console.log("Warning:",t,e)},clone:function(e){return $.extend({},e)},getPath:function(e,t){var n;n=this._getPath(e,t);if(n===void 0)throw new Error("Object "+e+" has no "+t);return n},_getPath:function(e,t){var n,r,i;e!=null&&t==null&&(t=e,e=Mozart.root),t[0].toUpperCase()===t[0]&&(e=Mozart.root),n=t.split(".");while(n.length>0){r=n.shift();if(r!=="this"){if(e[r]===void 0)return void 0;e.get!=null?i=e.get(r):i=e[r];if(i===null&&n.length>0)return void 0}else i=e;e=i}return i},getId:function(){return++n},parsePath:function(e){var t,n;return e.indexOf(".")===-1?[null,e]:(n=e.split("."),t=n.pop(),[n.join("."),t])},toMap:function(e,t){var n,r,i,s;t==null&&(t="id"),r={};for(i=0,s=e.length;i<s;i++)n=e[i],r[n[t]]=n;return r},sortBy:function(t,n){return n=e.parseSort(n),t.sort(function(e,t){var r,i,s,o,u;for(o=0,u=n.length;o<u;o++){s=n[o],typeof e[s]=="function"?r=e[s]():r=e[s],typeof t[s]=="function"?i=t[s]():i=t[s];if(r!=null&&i!=null){if(r==null)return-1;if(i==null)return 1;r=r.toString().toLowerCase(),i=i.toString().toLowerCase();if(r>i)return 1;if(r<i)return-1}}})},parseSort:function(e,t){var n,r,i;t==null&&(t={pos:0}),i=[],r="";while(t.pos<e.length){n=e[t.pos++];switch(n){case",":r.length>0&&(i.push(r),r="");break;case"[":if(r.length>0)throw new Error("parseSort: Unexpected Character [ at "+t.pos.toString());i.push(this.parseSort(e,t));break;case"]":return r.length>0&&i.push(r),i;default:r+=n}}return r.length>0&&(i.push(r),r=""),i},toCapsCase:function(e){var t;return t=e.replace(/^[a-z]{1,1}/g,function(e){return e.toUpperCase()}),t=t.replace(/_[a-z]{1,1}/g,function(e){return e.toUpperCase()}),t=t.replace(/_/g," "),t},toSnakeCase:function(e){var t;return t=e.replace(/[A-Z]{1,1}/g,function(e){return"_"+e.toLowerCase()}),t.replace(/^_/,"")},sliceStringBefore:function(e,t){return e.slice(0,e.length-t.length)},sliceStringAfter:function(e,t){return e.slice(t.length)},stringEndsWith:function(e,t){var n;return n=t.length,e.length>=n&&e.slice(-n)===t},stringStartsWith:function(e,t){var n;return n=t.length,e.length>=n&&e.slice(0,n)===t}}}).call(this)}),e.define("/events.coffee",function(e,t,n,r,i,s,o){(function(){var e;n.Events=e=function(){function e(){}return e.callbacks={},e.eventInit=function(t,n){var r,i,s,o;return(s=(r=e.callbacks)[t])==null&&(r[t]={count:0,events:{}}),(o=(i=e.callbacks[t].events)[n])!=null?o:i[n]={}},e.trigger=function(t,n,r){var i,s,o,u,a,f,l;if(e.callbacks[t]!=null&&e.callbacks[t].events[n]!=null){o=[],f=e.callbacks[t].events[n];for(s in f)i=f[s],i.fn.call==null&&Util.log("general","callback issue ",i.fn),i.fn.call(this,r),i.once&&o.push({objectId:t,eventName:n,id:s});l=[];for(u=0,a=o.length;u<a;u++)i=o[u],l.push(delete e.callbacks[i.objectId].events[i.eventName][i.id]);return l}},e.one=function(t,n,r){return e.eventInit(t,n),e.callbacks[t].events[n][e.callbacks[t].count++]={fn:r,once:!0}},e.bind=function(t,n,r){return e.eventInit(t,n),e.callbacks[t].events[n][e.callbacks[t].count++]={fn:r}},e.unbind=function(t,n,r){var i,s,o,u,a,f;if(r!=null&&e.callbacks[t]!=null&&e.callbacks[t].events[n]!=null){o=[],f=e.callbacks[t].events[n];for(s in f)i=f[s],i.fn===r&&o.push(s);for(u=0,a=o.length;u<a;u++)s=o[u],delete e.callbacks[t].events[n][s];return}if(n!=null&&e.callbacks[t]!=null&&e.callbacks[t].events[n]!=null){delete e.callbacks[t].events[n];return}return delete e.callbacks[t]},e.getBinds=function(t,n){return _(e.callbacks[t].events[n]).values()},e}()}).call(this)}),e.define("/synapse.coffee",function(e,t,n,r,i,s,o){(function(){var t,r,i,s,o,u,a,f,l,c,h,p=[].slice;r=e("./synapse-core"),n.Synapse=t=function(){function e(t){var n,i,s,o,u;if(t instanceof e)return t;if(n=e.cache[t[e.expando]])return n;u=e.hooks;for(s=0,o=u.length;s<o;s++){i=u[s];if(i.checkObjectType(t))break;i=null}if(i==null)throw new Error("An appropriate hook was not determined for "+r.getType(t)+" types");this.raw=(typeof i.coerceObject=="function"?i.coerceObject(t):void 0)||t,this.hook=i,e.cache[this.guid=t[e.expando]=e.guid++]=this,this._observing={},this._notifying={}}return e.guid=1,e.cache={},e.limitedApi="observe notify syncWith stopObserving pauseObserving resumeObserving stopNotifying pauseNotifying resumeNotifying".split(" "),e.prototype.get=function(){var e;return(e=this.hook).getHandler.apply(e,[this.raw].concat(p.call(arguments)))},e.prototype.set=function(){var e;return(e=this.hook).setHandler.apply(e,[this.raw].concat(p.call(arguments))),this},e.getSynapseFor=function(t){return e.cache[t[e.expando]]},e.check=function(){var t,n,r,i;n=[],i=e.cache;for(t in i)r=i[t],r.raw==null&&n.push(t);return n},e.prototype.observe=function(){var t,n;return n=arguments[0],t=2<=arguments.length?p.call(arguments,1):[],n=new e(n),i.apply(null,[n,this].concat(p.call(t))),this},e.prototype.notify=function(){var t,n;return n=arguments[0],t=2<=arguments.length?p.call(arguments,1):[],n=new e(n),i.apply(null,[this,n].concat(p.call(t))),this},e.prototype.syncWith=function(t,n,r){return t=new e(t),this.observe(t,r,n).notify(t,n,r),this},e.prototype.stopObserving=function(t){var n,r,i,s,o,u,a,f,c,h,p,d,v,m,g,y;if(t!=null){if(s=this._observing[t.guid]){v=s.channels;for(o=0,c=v.length;o<c;o++){n=v[o],m=n.events;for(u=0,h=m.length;u<h;u++)r=m[u],l(t,r,n.handler)}delete this._observing[t.guid],delete t._notifying[this.guid]}}else{for(i in this._observing){s=this._observing[i],t=e.cache[i],g=s.channels;for(a=0,p=g.length;a<p;a++){n=g[a],y=n.events;for(f=0,d=y.length;f<d;f++)r=y[f],l(t,r,n.handler)}delete t._notifying[this.guid]}this._observing={}}return this},e.prototype.transferObserveBindingsTo=function(e,t){var n,r,i,s,o;if(r=this._observing[t.guid]){o=r.channels;for(i=0,s=o.length;i<s;i++)n=o[i],e.observe(t,n.subjectInterface,n.observerInterface)}return this.stopObserving(t)},e.prototype.stopSyncWith=function(e){return e!=null?(this.stopObserving(e),this.stopNotifying(e)):(this.stopObserving(),this.stopNotifying())},e.prototype.transferAllSync=function(t){var n,r,i,s,o,u;s=this._notifying;for(n in s)r=s[n],i=e.cache[n],this.pauseObserving(i),this.transferNotifyBindingsTo(t,i);o=this._observing,u=[];for(n in o)r=o[n],i=e.cache[n],u.push(this.transferObserveBindingsTo(t,i));return u},e.prototype.transferSyncTo=function(e,t){return this.pauseObserving(t),this.transferNotifyBindingsTo(e,t),this.transferObserveBindingsTo(e,t)},e.prototype.pauseObserving=function(e){var t,n;if(e!=null){if(n=this._observing[e.guid])n.open=!1}else for(t in this._observing)this._observing[t].open=!1;return this},e.prototype.resumeObserving=function(e){var t,n;if(e!=null){if(n=this._observing[e.guid])n.open=!0}else for(t in this._observing)this._observing[t].open=!0;return this},e.prototype.stopNotifying=function(t){var n,r,i,s,o,u,a,f,c,h,p,d,v,m,g,y;if(t!=null){if(s=this._notifying[t.guid]){v=s.channels;for(o=0,c=v.length;o<c;o++){n=v[o],m=n.events;for(u=0,h=m.length;u<h;u++)r=m[u],l(this,r,n.handler)}delete this._notifying[t.guid],delete t._observing[this.guid]}}else{for(i in this._notifying){s=this._notifying[i],t=e.cache[i],g=s.channels;for(a=0,p=g.length;a<p;a++){n=g[a],y=n.events;for(f=0,d=y.length;f<d;f++)r=y[f],l(this,r,n.handler)}delete t._observing[this.guid]}this._notifying={}}return this},e.prototype.transferNotifyBindingsTo=function(e,t){var n,r,i,s,o;if(r=this._notifying[t.guid]){o=r.channels;for(i=0,s=o.length;i<s;i++)n=o[i],e.notify(t,n.subjectInterface,n.observerInterface)}return this.stopNotifying(t)},e.prototype.pauseNotifying=function(e){var t,n;if(e!=null){if(n=this._notifying[e.guid])n.open=!1}else for(t in this._notifying)this._notifying[t].open=!1;return this},e.prototype.resumeNotifying=function(e){var t,n;if(e!=null){if(n=this._notifying[e.guid])n.open=!0}else for(t in this._notifying)this._notifying[t].open=!0;return this},e.prototype.destroy=function(){return this.stopObserving(),this.stopNotifying(),delete e.cache[this.raw[e.expando]],delete this.raw},e}(),t.expando="Synapse"+Math.random().toString().replace(/\D/g,""),t.hooks=[],u=function(){var e,t,n,r;t=arguments[0],e=2<=arguments.length?p.call(arguments,1):[];if(t.hook.detectEvent!=null&&(n=(r=t.hook).detectEvent.apply(r,[t.raw].concat(p.call(e)))))return n;throw new Error(""+t.hook.typeName+" types do not support events")},c=function(){var e,t,n,r;t=arguments[0],e=2<=arguments.length?p.call(arguments,1):[];if(n=typeof (r=t.hook).onEventHandler=="function"?r.onEventHandler.apply(r,[t.raw].concat(p.call(e))):void 0)return t;throw new Error(""+t.hook.typeName+" types do not support events")},l=function(){var e,t,n,r;t=arguments[0],e=2<=arguments.length?p.call(arguments,1):[];if(n=typeof (r=t.hook).offEventHandler=="function"?r.offEventHandler.apply(r,[t.raw].concat(p.call(e))):void 0)return t;throw new Error(""+t.hook.typeName+" types do not support events")},h=function(){var e,t,n,r;t=arguments[0],e=2<=arguments.length?p.call(arguments,1):[];if(n=typeof (r=t.hook).triggerEventHandler=="function"?r.triggerEventHandler.apply(r,[t.raw].concat(p.call(e))):void 0)return t;throw new Error(""+t.hook.typeName+" types do not support events")},a=function(e){var t;return typeof (t=e.hook).detectInterface=="function"?t.detectInterface(e.raw):void 0},f=function(e){var t;return typeof (t=e.hook).detectOtherInterface=="function"?t.detectOtherInterface(e.raw):void 0},o={event:null,subjectInterface:null,observerInterface:null,converter:null,triggerOnBind:!0},s=function(e,t,n){var i,s,l,p,d,v,m,g,y,b,w,E,S,x;for(v in o)E=o[v],n[v]==null&&(n[v]=E);if((s=n.converter)&&!r.isFunction(s)&&!(s=t.raw[s]))throw Error("Property "+n.coverter+" is undefined on "+t.raw);if(!(y=n.subjectInterface)&&!(y=a(e)||f(t)))throw new Error("An interface for "+e.hook.typeName+" objects could not be detected");if(!(m=n.observerInterface)&&!(m=a(t)||f(e)))throw new Error("An interface for "+t.hook.typeName+" objects could not be detected");(p=n.event)||(p=u(e,y)),r.isArray(p)||(p=[p]),w=n.triggerOnBind,(g=t._observing[e.guid])||(g=t._observing[e.guid]={open:!0,channels:[]}),(b=e._notifying[t.guid])||(b=e._notifying[t.guid]={open:!0,channels:[]}),d=function(){var n,i,o;if(((i=t._observing[e.guid])!=null?i.open:void 0)===!0&&((o=e._notifying[t.guid])!=null?o.open:void 0)===!0){r.isFunction(y)?E=y(e):E=e.get(y),s&&(E=s(E,t,m)),r.isFunction(m)?n=m(t):n=t.get(m);if(n!==E)return r.isFunction(m)?m(t,E):t.set(m,E)}},i={subjectInterface:y,observerInterface:m,events:p,handler:d},g.channels.push(i),b.channels.push(i);for(S=0,x=p.length;S<x;S++)l=p[S],c(e,l,d),w&&h(e,l)},i=function(){var e,t,n,i,o,u,a,f,l;a=arguments[0],i=arguments[1],n=3<=arguments.length?p.call(arguments,2):[],u=n,e=n[0],t=n[1];if(r.isFunction(e))u={converter:e};else if(r.isArray(e)||!r.isObject(e))u={subjectInterface:e,observerInterface:t};r.isArray(u)||(u=[u]);for(f=0,l=u.length;f<l;f++)o=u[f],s(a,i,o)}}).call(this)}),e.define("/synapse-core.coffee",function(e,t,n,r,i,s,o){(function(){t.exports={toString:Object.prototype.toString,getType:function(e){return this.toString.call(e).match(/^\[object\s(.*)\]$/)[1]},isObject:function(e){return this.getType(e)==="Object"},isArray:function(e){return this.getType(e)==="Array"},isFunction:function(e){return this.getType(e)==="Function"},isString:function(e){return this.getType(e)==="String"},isBoolean:function(e){return this.getType(e)==="Boolean"}}}).call(this)}),e.define("/control.coffee",function(e,t,n,r,i,s,o){(function(){var t,r,i=function(e,t){return function(){return e.apply(t,arguments)}},s={}.hasOwnProperty,o=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=e("./view").View,n.Control=t=function(e){function t(){return this.afterRender=i(this.afterRender,this),t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.idPrefix="control",t.prototype.error=function(e){return this.help=e,this.errorState=!0},t.prototype.afterRender=function(){if(this.errorState)return this.element.addClass("error")},t}(r)}).call(this)}),e.define("/controller.coffee",function(e,t,n,r,i,s,o){(function(){var t,r,i={}.hasOwnProperty,s=function(e,t){function r(){this.constructor=e}for(var n in t)i.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=e("./object").MztObject,n.Controller=t=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t}(r)}).call(this)}),e.define("/data-index.coffee",function(e,t,n,r,i,s,o){(function(){var t,r,i,s,o={}.hasOwnProperty,u=function(e,t){function r(){this.constructor=e}for(var n in t)o.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};s=e("./object").MztObject,n.DataIndex=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.indexTypes={},t.prototype.load=function(){throw new Error("Mozart.DataIndex: Abstract, Not Implemented")},t.prototype.add=function(e){throw new Error("Mozart.DataIndex: Abstract, Not Implemented"
)},t.prototype.remove=function(e){throw new Error("Mozart.DataIndex: Abstract, Not Implemented")},t.prototype.update=function(e,t,n){throw new Error("Mozart.DataIndex: Abstract, Not Implemented")},t.prototype.rebuild=function(){throw new Error("Mozart.DataIndex: Abstract, Not Implemented")},t.registerIndexClassType=function(e,t){return this.indexTypes[e]=t},t.getIndexClassType=function(e){return this.indexTypes[e]},t}(s),n.MapIndex=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.init=function(){return this.map={},this.rebuild()},t.prototype.load=function(e){return this.map[e]!=null?this.map[e]:{}},t.prototype.update=function(e,t,n){var r,i;return this.map[t]!=null&&(delete this.map[t][e.id],_(this.map[t]).keys().length===0&&delete this.map[t]),(i=(r=this.map)[n])==null&&(r[n]={}),this.map[n][e.id]=e},t.prototype.add=function(e){var t,n,r;return(r=(t=this.map)[n=e[this.attribute]])==null&&(t[n]={}),this.map[e[this.attribute]][e.id]=e},t.prototype.remove=function(e){var t,n,r,i;r=this.map,i=[];for(n in r)t=r[n],delete t[e.id],_(t).keys().length===0?i.push(delete this.map[n]):i.push(void 0);return i},t.prototype.rebuild=function(){var e,t,n,r,i;this.map={},r=this.modelClass.all(),i=[];for(t=0,n=r.length;t<n;t++)e=r[t],i.push(this.add(e));return i},t}(r),r.registerIndexClassType("map",i),n.BooleanIndex=t=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.init=function(){return this.value=this.options.value,this.rebuild()},t.prototype.load=function(e){return e===this.value?this.valueIds:this.nonValueIds},t.prototype.update=function(e,t,n){return t===this.value?delete this.valueIds[e.id]:delete this.nonValueIds[e.id],n===this.value?this.valueIds[e.id]=e:this.nonValueIds[e.id]=e},t.prototype.add=function(e){return e[this.attribute]===this.value?this.valueIds[e.id]=e:this.nonValueIds[e.id]=e},t.prototype.remove=function(e){return delete this.valueIds[e.id],delete this.nonValueIds[e.id]},t.prototype.rebuild=function(){var e,t,n,r,i;this.valueIds={},this.nonValueIds={},r=this.modelClass.all(),i=[];for(t=0,n=r.length;t<n;t++)e=r[t],i.push(this.add(e));return i},t}(r),r.registerIndexClassType("boolean",t)}).call(this)}),e.define("/dom-manager.coffee",function(e,t,n,r,i,s,o){(function(){var t,r,i,s=function(e,t){return function(){return e.apply(t,arguments)}},o={}.hasOwnProperty,u=function(e,t){function r(){this.constructor=e}for(var n in t)o.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};i=e("./util"),r=e("./object").MztObject,n.DOMManager=t=function(e){function n(){return this.getControlOptionsValues=s(this.getControlOptionsValues,this),this.onControlEvent=s(this.onControlEvent,this),this.onViewEvent=s(this.onViewEvent,this),this.onApplicationEvent=s(this.onApplicationEvent,this),this.release=s(this.release,this),this.checkClickOutside=s(this.checkClickOutside,this),this.checkClickInside=s(this.checkClickInside,this),n.__super__.constructor.apply(this,arguments)}var t;return u(n,e),t={click:"click",dblclick:"dblClick",focus:"focus",blur:"blur",keyup:"keyUp",keydown:"keyDown",keypress:"keyPress",focusout:"focusOut",focusin:"focusIn",change:"change",mouseover:"mouseOver",mouseout:"mouseOut"},n.prototype.init=function(){var e,n,r,s,o,u=this;this.element=$(this.rootElement);for(e in t)s=t[e],this.element.on(e,null,{eventName:s},this.onApplicationEvent);return n=function(){var e;e=[];for(r in t)o=t[r],e.push(r);return e}().join(" "),this.element.on(n,"[view]",this.onViewEvent),this.element.on(n,"[data-mozart-action]",this.onControlEvent),this.openElements={},i.find=function(e){var t,n,r,s,o,a;a=u.layouts;for(s=0,o=a.length;s<o;s++){r=a[s];if(r.views[e]!=null)return i.log("general",""+e+": view of",r.rootElement),r.views[e];t=r.getControl(e);if(t!=null)return i.log("general",""+e+": control of",r.rootElement),t}return n=$("#"+e),n.length>0?(i.log("general",""+e+" is a an element"),n[0]):i.log("general","Cannot find ID "+e)}},n.prototype.checkClickInside=function(e){var t,n,r,s,o,u,a;if(e.type!=="click")return;u=this.layouts,a=[];for(s=0,o=u.length;s<o;s++)n=u[s],a.push(function(){var s,o;s=n.hasClickInside,o=[];for(t in s)r=s[t],$(e.target).parents("#"+t).length>0?(i.log("events","clickInside on",r,"(",e,")"),o.push(r.clickInside())):o.push(void 0);return o}());return a},n.prototype.checkClickOutside=function(e){var t,n,r,s,o,u,a;if(e.type!=="click")return;u=this.layouts,a=[];for(s=0,o=u.length;s<o;s++)n=u[s],a.push(function(){var s,o;s=n.hasClickOutside,o=[];for(t in s)r=s[t],$(e.target).parents("#"+t).length===0?(i.log("events","clickOutside on",r,"(",e,")"),o.push(r.clickOutside())):o.push(void 0);return o}());return a},n.prototype.release=function(){var e,r,i,s,o;for(e in t)s=t[e],this.element.off(e,null,this._checkRootEvent);return r=function(){var e;e=[];for(i in t)o=t[i],e.push(i);return e}().join(" "),this.element.off(r,"[view]",this.onViewEvent),this.element.off(r,"[data-mozart-action]",this.onControlEvent),n.__super__.release.apply(this,arguments)},n.prototype.onApplicationEvent=function(e){return this.trigger(e.data.eventName,e)},n.prototype.onViewEvent=function(e){var n,r,s,o,u,a,f,l;this.checkClickInside(e),u=null,n=o=e.currentTarget;if(n==null)return;l=this.layouts;for(a=0,f=l.length;a<f;a++)r=l[a],u=r.views[n.id],u!=null&&(s=t[e.type],this.trigger("viewEvent",e,u),typeof u[s]=="function"&&(i.log("events",s,"on",u,"(",e,")"),u[s](e,u)));return this.checkClickOutside(e),!0},n.prototype.onControlEvent=function(e){var t,n,r,s,o,u,f,l;this.checkClickInside(e),n=$(e.currentTarget),r=n.attr("data-mozart-action"),i.log("controls","action",e),f=this.layouts;for(o=0,u=f.length;o<u;o++)s=f[o],t=s.getControl(r),t!=null&&(t.events===null||(l=e.type,a.call(t.events,l)>=0))&&(typeof t.view[t.action]=="function"?(i.log("events","method",t.action,"on",t.view,"(",e,")"),i.log("controls","action on control",t,e),this.trigger("controlEvent",e,t),t.view[t.action](n,this.getControlOptionsValues(t.view,t.options),e),t.allowDefault||e.preventDefault()):i.warn("Action "+t.action+" does not exist on view "+t.view.id+", "+t.view.name,t));return this.checkClickOutside(e),e.stopImmediatePropagation()},n.prototype.getControlOptionsValues=function(e,t){var n,r,s,o;s={};for(n in t)o=t[n],i.stringEndsWith(n,"Lookup")?(r=i.sliceStringBefore(n,"Lookup"),s[r]=i._getPath(e,o)):s[n]=o;return s},n}(r)}).call(this)}),e.define("/handlebars.coffee",function(e,t,n,r,i,s,o){(function(){var t,n,r,i,s,o;r=e("./util"),i=e("./view").View,n=e("./i18n-view").I18nView,t=e("./collection").Collection,s=function(e,t){return r._getPath(e,t)},o=function(e,t){var n;return typeof t=="string"?n=r._getPath(e,t):typeof t=="function"&&(n=t.call(e)),n},Handlebars.registerHelper("site",function(e,t){return new Handlebars.SafeString("/#")}),Handlebars.registerHelper("bind",function(e,t){var n,i,s,o,u,a,f;r.log("handlebars","handlebars helper 'bind':",this,e,t),arguments.length===1&&r.error("Bind helper must have a target."),n="bind"+r.getId(),o=(a=t.hash.tag)!=null?a:"span",i="<"+o+" id='"+n+"'",f=t.hash;for(s in f)u=f[s],r.stringEndsWith(s,"Html")&&(i+=" "+r.sliceStringBefore(s,"Html")+'="'+u+'"');return i+="></"+o+">",t.data.registerDomBind(n,e),new Handlebars.SafeString(i)}),Handlebars.registerHelper("i18n",function(e,t){var n,i;return r.log("handlebars","handlebars helper 'i18n':",this,e,t),arguments.length===1?(n="",r.error("i18n helper usage must reference a key.")):(i=r._getPath(window,"i18n."+e),i==null?(r.error("i18n helper: key '"+e+"' does not exist in current language file."),n=""):n=r.getPath(window,"i18n."+e)(t.hash)),new Handlebars.SafeString(n)}),Handlebars.registerHelper("bindI18n",function(e,t){var i,s,o,u,a,f,l;r.log("handlebars","handlebars helper 'bindI18n':",this,e,t),arguments.length===1&&r.error("bindI18n helper must have a target."),a={context:this,i18nTemplate:e,parent:t.data};if(t.hash!=null){l=t.hash;for(s in l)u=l[s],a[s]=u}return f=a.parent.layout.createView(n,a),a.parent.addView(f),o=f.createElement(),i=o.outerHTML,i==null&&(i=""),a.parent.layout.queueRenderView(f),new Handlebars.SafeString(i)}),Handlebars.registerHelper("view",function(e,t){var n,s,o,u,a,f,l,c,h;r.log("handlebars","handlebars helper 'view':",this,e,t),arguments.length===1&&(t=e,e=null),o=t.data,e!=null?typeof e=="string"?l=r._getPath(e):l=e:l=i,l==null&&r.error("view handlebars helper: viewClass does not exist","context",e,"this",this),c={context:this,parent:o},t.fn!=null&&(c.templateFunction=t.fn);if(t.hash!=null){h=t.hash;for(s in h)a=h[s],c[s]=a}return f=o.layout.createView(l,c),o.addView(f),u=f.createElement(),n=u.outerHTML,n==null&&(n=""),o.layout.queueRenderView(f),new Handlebars.SafeString(n)}),Handlebars.registerHelper("collection",function(e,n){var s,o,u,a,f,l,c,h,p,d;r.log("handlebars","handlebars helper 'collection':",this,r.clone(e),n),arguments.length===1?(n=e,e=null,h=i):(h=r.getPath(e),h==null&&r.error("View for collection does not exist","view name",e)),a=n.data,p={context:this,viewClass:h,parent:a},n.fn!=null&&(p.viewClassTemplateFunction=n.fn),d=n.hash;for(u in d)l=d[u],p[u]=l;return n.hash.collectionClass!=null?s=r.getPath(n.hash.collectionClass):s=t,c=a.layout.createView(s,p),c.parent=a,a.addView(c),f=c.createElement(),o=f.outerHTML,o==null&&(o=""),a.layout.queueRenderView(c),new Handlebars.SafeString(o)}),Handlebars.registerHelper("linkTo",function(e,t){var n,i,s;return r.log("handlebars","handlebars helper 'linkTo':",this,e,t),arguments.length===1&&(t=e),typeof e=="string"?e=r._getPath(this,e):typeof e=="function"&&(e=e.call(this)),e!=null?(n="<a href='/#"+e.showUrl()+"'",((s=t.hash)!=null?s.classNames:void 0)!=null&&(n+=" class='"+t.hash.classNames+"'"),n+=">",i=t.fn(this),i!=null&&i.length>0||(i="(Empty Value)"),n+=i,n+="</a>",new Handlebars.SafeString(n)):""}),Handlebars.registerHelper("valueOf",function(e,t){var n;return r.log("handlebars","handlebars helper 'valueOf':",this,e,t),arguments.length===1&&(t=e),n=r._getPath(this,e),n==null&&(n=""),new Handlebars.SafeString(n)}),Handlebars.registerHelper("rawPath",function(e,t){var n;return arguments.length===1&&(t=e),n=r._getPath(this,e),n==null&&(n=""),n}),Handlebars.registerHelper("uriPath",function(e,t){var n;return arguments.length===1&&(t=e),n=r._getPath(this,e),n==null&&(n=""),n,encodeURI(n)}),Handlebars.registerHelper("valueEach",function(e,t){var n,i,s,o,u,a;r.log("handlebars","handlebars helper 'valueEach':",this,e,t),arguments.length===1&&(t=e),e=r.getPath(this,e);if(e==null)return"";i="";for(s=0,o=e.length;s<o;s++)n=e[s],i+=t.fn(n),(t!=null?(u=t.hash)!=null?u.seperator:void 0:void 0)!=null&&(i+=t.hash.seperator);return(t!=null?(a=t.hash)!=null?a.seperator:void 0:void 0)!=null&&i.length>0&&(i=i.slice(0,i.length-t.hash.seperator.length)),new Handlebars.SafeString(i)}),Handlebars.registerHelper("yesNo",function(e,t){return r.log("handlebars","handlebars helper 'yesNo':",this,e,t),arguments.length===1&&(t=e),typeof e=="string"&&(e=r.getPath(this,e)),e==null?"No":e?"Yes":"No"}),Handlebars.registerHelper("valueIf",function(e,t){return r.log("handlebars","handlebars helper 'valueOf':",this,e,t),typeof e=="string"&&(e=r._getPath(this,e)),e?t.fn(this):t.inverse(this)}),Handlebars.registerHelper("valueUnless",function(e,t){return typeof e=="string"&&(e=r.getPath(this,e)),e?t.inverse(this):t.fn(this)}),Handlebars.registerHelper("action",function(e,t){var n,i,s,o,u;return r.log("handlebars","handlebars helper 'action':",this,e,t),arguments.length===1&&(t=record),u=t.data,t.hash.target!=null&&(t.hash.target==="parent"?u=t.data.parent:u=r.getPath(t.data,t.hash.target)),n=r.getId(),o='data-mozart-action="'+n+'"',t.hash.events!=null?s=t.hash.events.split(","):s=["click"],i=t.hash.allowDefault&&!0,t.data.layout.addControl(n,{action:e,view:u,options:t.hash,events:s,allowDefault:i}),new Handlebars.SafeString(o)}),Handlebars.registerHelper("date",function(e){var t,n;return n=o(this,e),t=r.serverToLocalDate(n)||"(none)",new Handlebars.SafeString(t)}),Handlebars.registerHelper("dateTime",function(e){var t,n;return n=o(this,e),t=r.serverToLocalDateTime(n),new Handlebars.SafeString(t)}),Handlebars.registerHelper("timeAgo",function(e){var t,n;return n=o(this,e),t=r.serverToLocalTimeAgo(n),new Handlebars.SafeString(t)}),Handlebars.registerHelper("mozartversion",function(){return new Handlebars.SafeString(Mozart.version)}),Handlebars.registerHelper("mozartversiondate",function(){return new Handlebars.SafeString(Mozart.versionDate.toLocaleDateString())})}).call(this)}),e.define("/i18n-view.coffee",function(e,t,n,r,i,s,o){(function(){var t,r,i,s={}.hasOwnProperty,o=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};i=e("./view").View,r=e("./util"),n.I18nView=t=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.tag="span",t.prototype.idPrefix="i18nview",t.prototype.init=function(){t.__super__.init.apply(this,arguments);if(this.i18nTemplate==null)throw new Error("Mozart.I18nView must have a i18nTemplate");return this.bind("change",this.redraw)},t.prototype.templateFunction=function(){return r.getPath(window,"i18n."+this.i18nTemplate)(this)},t}(i)}).call(this)}),e.define("/layout.coffee",function(e,t,n,r,i,s,o){(function(){var t,r,i,s=function(e,t){return function(){return e.apply(t,arguments)}},o={}.hasOwnProperty,u=function(e,t){function r(){this.constructor=e}for(var n in t)o.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};i=e("./util"),r=e("./router").Router,n.Layout=t=function(e){function t(){return this.releaseViewControls=s(this.releaseViewControls,this),this.removeControl=s(this.removeControl,this),this.getControl=s(this.getControl,this),this.addControl=s(this.addControl,this),this.releaseViews=s(this.releaseViews,this),this.releaseView=s(this.releaseView,this),this.queueReleaseView=s(this.queueReleaseView,this),this.release=s(this.release,this),this.processRenderQueue=s(this.processRenderQueue,this),this.queueRenderView=s(this.queueRenderView,this),this._transition=s(this._transition,this),this.doRoute=s(this.doRoute,this),this.resetRoute=s(this.resetRoute,this),this.bindRoot=s(this.bindRoot,this),this.createView=s(this.createView,this),this.init=s(this.init,this),t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.init=function(){var e,n,r,i,s;t.__super__.init.apply(this,arguments),this.viewRenderQueue=[],this.releaseMap={},this.views={},this.currentState=null,this.controls={},this.hasClickOutside={},this.hasClickInside={},i=this.states,s=[];for(n=0,r=i.length;n<r;n++)e=i[n],e.path!=null&&e.viewClass!=null&&s.push(this.register(e.path,this.doRoute,e));return s},t.prototype.createView=function(e,t){var n;return t==null&&(t={}),t.layout=this,n=e.create(t),this.views[n.id]=n,n.clickInside!=null&&(this.hasClickInside[n.id]=n),n.clickOutside!=null&&(this.hasClickOutside[n.id]=n),n},t.prototype.bindRoot=function(){return this.rootEl=$(this.rootElement)[0]},t.prototype.resetRoute=function(){return this.viewRenderQueue=[],this.currentState=null,this.releaseViews()},t.prototype.doRoute=function(e,t){return this.currentState!=null&&!this.currentState.canExit()?(i.log("layout","cannot exit state",this.currentState),!1):(this.currentState=null,e.canEnter(t)?(this._transition(e),!0):(i.log("layout","cannot enter state",e,t),!1))},t.prototype._transition=function(e){this.resetRoute(),this.currentState=e,this.currentState.doTitle();if(this.currentState.viewClass!=null)return this.currentView!=null&&(this.releaseMap[this.currentView.id]=this.currentView),this.currentView=this.createView(this.currentState.viewClass,this.currentState.viewOptions),this.currentView.el=this.rootEl,this.queueRenderView(this.currentView)},t.prototype.queueRenderView=function(e){var t,n,r;return i.log("layout",""+this._mozartId+" queueRenderView",e),(r=(t=this.views)[n=e.id])==null&&(t[n]=e),this.viewRenderQueue.length===0&&_.delay(this.processRenderQueue,0),this.viewRenderQueue.push(e)},t.prototype.processRenderQueue=function(){var e,t,n,r,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b;if(this.viewRenderQueue.length===0)return;i.log("layout",""+this._mozartId+" processRenderQueue with "+this.viewRenderQueue.length+" views"),t=[],n=[];while(this.viewRenderQueue.length>0)o=this.viewRenderQueue.shift(),o.beforeRender(),o.releaseChildren(),o.prepareElement(),n.push(o);r=[];for(f=0,p=n.length;f<p;f++){u=n[f];for(l=0,d=n.length;l<d;l++)a=n[l],a!==u&&u.hasAncestor(a)&&!_.contains(r,u)&&r.push(u)}s=_.difference(n,r);for(c=0,v=s.length;c<v;c++)o=s[c],o.reassignElements();for(h=0,m=s.length;h<m;h++)o=s[h],o.replaceElement();for(y=0,g=n.length;y<g;y++)o=n[y],o.postRender();b=this.releaseMap;for(e in b)o=b[e],o!=null&&o.release();return this.releaseMap={},i.log("layout",""+this._mozartId+" render finished"),this.trigger("render:complete")},t.prototype.release=function(){return this.releaseViews(),t.__super__.release.apply(this,arguments)},t.prototype.queueReleaseView=function(e){return this.releaseMap[e.id]=e},t.prototype.releaseView=function(e){return this.releaseViewControls(e),delete this.views[e.id],delete this.hasClickOutside[e.id],delete this.hasClickInside[e.id]},t.prototype.releaseViews=function(){var e,t,n,r;n=this.views,r=[];for(e in n)t=n[e],i.log("layout","processRenderQueue:releasing",t.id,t),this.releaseMap[e]=t,r.push(this.processRenderQueue());return r},t.prototype.addControl=function(e,t){return i.log("layout","adding control",e,t),this.controls[e]=t},t.prototype.getControl=function(e){return this.controls[e]},t.prototype.removeControl=function(e){return i.log("layout","removing control",e),delete this.controls[e]},t.prototype.releaseViewControls=function(e){var t,n,r,s;r=this.controls,s=[];for(n in r){t=r[n];if(t.view!==e)continue;i.log("layout","releasing control for view",e,"control",t.action,t),s.push(delete this.controls[n])}return s},t}(r)}).call(this)}),e.define("/router.coffee",function(e,t,n,r,i,s,o){(function(){var t,r,i,s=function(e,t){return function(){return e.apply(t,arguments)}},o={}.hasOwnProperty,u=function(e,t){function r(){this.constructor=e}for(var n in t)o.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};t=e("./object").MztObject,i=e("./util"),n.Router=r=function(e){function t(){return this.release=s(this.release,this),this.navigateRoute=s(this.navigateRoute,this),this.onPopState=s(this.onPopState,this),this.onNavigationEvent=s(this.onNavigationEvent,this),this.onHashChange=s(this.onHashChange,this),this.register=s(this.register,this),this.stop=s(this.stop,this),this.start=s(this.start,this),this.init=s(this.init,this),t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.init=function(){var e;return this.routes={},(e=this.useHashRouting)!=null?e:this.useHashRouting=!1},t.prototype.start=function(){return this.useHashRouting?($(window).bind("hashchange",this.onHashChange),this.navigateRoute(window.location.hash)):($("body").on("click","a",this.onNavigationEvent),$(window).on("popstate",this.onPopState),this.navigateRoute(document.location.pathname))},t.prototype.stop=function(){return this.useHashRouting?$(window).unbind("hashchange",this.onHashChange):($("body").off("click","a",this.onNavigationEvent),$(window).off("popstate",this.onPopState))},t.prototype.register=function(e,t,n){var r,s,o,u,a,f;i.log("routes","registering route",e,n),u=e.split("/"),r=[],s=this.useHashRouting?"\\#":"";for(a=0,f=u.length;a<f;a++)o=u[a],o[0]===":"?(s+="([^\\/]+)\\/",r.push(o.substr(1))):s+=this._escForRegEx(o)+"\\/";return s.length>2&&(s=s.substr(0,s.length-2)),this.routes[e]={regex:new RegExp("^"+s+"$","i"),params:r,callback:t,data:n}},t.prototype.onHashChange=function(){return this.navigateRoute(window.location.hash)},t.prototype.onNavigationEvent=function(e){if(e.target.host!==document.location.host||e.target.port!==document.location.port||e.target.protocol!==document.location.protocol)return;if(this.navigateRoute(e.target.pathname))return history.pushState({one:1},null,e.target.href),e.preventDefault()},t.prototype.onPopState=function(){return this.navigateRoute(window.location.pathname)},t.prototype.navigateRoute=function(e){var t,n,r,s,o,u,a,f,l,c;this.isNavigating=!0;if(e==null||e.length===0){u=this.routes["/"];if(u!=null)return u.callback(u.data,r),this.isNavigating=!1,!1;i.log("routemanager","WARNING: No Default route defined, no route for path",e)}l=this.routes;for(s in l){u=l[s],r={},n=u.regex.exec(e);if(n!==null){t=1,c=u.params;for(a=0,f=c.length;a<f;a++)o=c[a],t<n.length&&(r[o]=n[t++]);return u.callback(u.data,r),this.isNavigating=!1,!0}}return this.isNavigating=!1,this.trigger("noroute",window.location.hash),!1},t.prototype.release=function(){return this.stop(),t.__super__.release.apply(this,arguments)},t.prototype._escForRegEx=function(e){var t,n,r,i;e.replace("\\","\\\\"),t="./+{}()*";for(r=0,i=t.length;r<i;r++)n=t[r],e=e.replace(n,"\\"+n);return e},t}(t)}).call(this)}),e.define("/model-instance.coffee",function(e,t,n,r,i,s,o){(function(){var t,r,i,s=function(e,t){return function(){return e.apply(t,arguments)}},o={}.hasOwnProperty,u=function(e,t){function r(){this.constructor=e}for(var n in t)o.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};i=e("./util"),r=e("./object").MztObject,n.Instance=t=function(e){function n(){return this.copyFrom=s(this.copyFrom,this),this.copyTo=s(this.copyTo,this),this.destroy=s(this.destroy,this),this.save=s(this.save,this),this.load=s(this.load,this),n.__super__.constructor.apply(this,arguments)}var t;return u(n,e),t=["id"],n.prototype.init=function(){return this._type=this.modelClass.modelName},n.prototype.load=function(e){return e==null&&(e={}),this.modelClass.loadInstance(this,e)},n.prototype.save=function(e){return e==null&&(e={}),this.modelClass.exists(this.id)?(this.modelClass.updateInstance(this,e),this.trigger("update")):(this.modelClass.createInstance(this,e),this.trigger("create")),this.trigger("change")},n.prototype.destroy=function(e){return e==null&&(e={}),this.trigger("destroy",e),this.trigger("change"),this.modelClass.destroyInstance(this,e)},n.prototype.get=function(e){if(this.modelClass.hasAttribute(e)||i.isFunction(this[e]))return i.isFunction(this[e])?this[e]():n.__super__.get.call(this,e);throw new Error(""+this.modelClass.modelName+" has no attribute or relation '"+e+"' or foreign key '"+e+"_id'")},n.prototype.set=function(e,t){if(this.modelClass.hasAttribute(e)||i.isFunction(this[e]))return i.isFunction(this[e])?this[e](t):(e!=="id"&&this.modelClass.hasIndex(e)&&this.modelClass.exists(this.id)&&this.modelClass.updateIndex(e,this,this[e],t),n.__super__.set.call(this,e,t));throw new Error(""+this.modelClass.modelName+" has no attribute or relation '"+e+"' or foreign key '"+e+"_id'")},n.prototype.copyTo=function(e){var n,i,s;e==null&&(e=r.create()),s=this.modelClass.attrs;for(n in s)i=s[n],a.call(t,n)<0&&(e.set!=null?e.set(n,this[n]):e[n]=this[n]);return e},n.prototype.copyFrom=function(e){var n,r,i,s,o;r=!1;for(n in e){o=e[n];if(!(a.call(t,n)<0))continue;s=this.modelClass.attrs[n],s!=null&&(i=o,s==="decimal"&&(i=parseFloat(i)),this[n]!==i&&(r=!0,this.set(n,i)))}return r},n}(r)}).call(this)}),e.define("/model-instancecollection.coffee",function(e,t,n,r,i,s,o){(function(){var t,r,i,s=function(e,t){return function(){return e.apply(t,arguments)}},o={}.hasOwnProperty,u=function(e,t){function r(){this.constructor=e}for(var n in t)o.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};i=e("./util"),r=e("./object").MztObject,n.InstanceCollection=t=function(e){function t(){return this.unBindEvents=s(this.unBindEvents,this),this.bindEvents=s(this.bindEvents,this),this.allAsMap=s(this.allAsMap,this),this.count=s(this.count,this),t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.count=function(){return this.all().length},t.prototype.allAsMap=function(){return i.toMap(this.all())},t.prototype.all=function(){return[]},t.prototype.bindEvents=function(e){var t,n,r,i;i=[];for(n=0,r=e.length;n<r;n++)t=e[n],t.bind("create",this.onModelChange),t.bind("update",this.onModelChange),i.push(t.bind("destroy",this.onModelChange));return i},t.prototype.unBindEvents=function(e){var t,n,r,i;i=[];for(n=0,r=e.length;n<r;n++)t=e[n],t.unbind("create",this.onModelChange),t.unbind("update",this.onModelChange),i.push(t.unbind("destroy",this.onModelChange));return i},t}(r)}).call(this)}),e.define("/model-onetomanycollection.coffee",function(e,t,n,r,i,s,o){(function(){var t,r,i=function(e,t){return function(){return e.apply(t,arguments)}},s={}.hasOwnProperty,o=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};t=e("./model-instancecollection").InstanceCollection,n.OneToManyCollection=r=function(e){function t(){return this.release=i(this.release,this),this.onModelChange=i(this.onModelChange,this),this.contains=i(this.contains,this),this.remove=i(this.remove,this),this.createFromValues=i(this.createFromValues,this),this.add=i(this.add,this),this.all=i(this.all,this),t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.init=function(){return this.bindEvents([this.otherModel])},t.prototype.all=function(){return this.otherModel.findByAttribute(this.fkname,this.record.id)},t.prototype.add=function(e){return e.set(this.fkname,this.record.id),e.save(),this.record.trigger("change:"+this.attribute)},t.prototype.createFromValues=function(e){var t;return t=this.otherModel.initInstance(e),this.add(t),t},t.prototype.remove=function(e){return e.set(this.fkname,null),this.record.trigger("change:"+this.attribute)},t.prototype.contains=function(e){return this.otherModel.findByAttribute(this.fkname,this.record.id).length>0},t.prototype.onModelChange=function(e){return this.trigger("change",e)},t.prototype.release=function(){return this.unBindEvents([this.otherModel]),t.__super__.release.apply(this,arguments)},t}(t)}).call(this)}),e.define("/model-onetomanypolycollection.coffee",function(e,t,n,r,i,s,o){(function(){var t,r,i=function(e,t){return function(){return e.apply(t,arguments)}},s={}.hasOwnProperty,o=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};t=e("./model-instancecollection").InstanceCollection,n.OneToManyPolyCollection=r=function(e){function t(){return this.contains=i(this.contains,this),this.remove=i(this.remove,this),this.add=i(this.add,this),this.createFromValues=i(this.createFromValues,this),this.all=i(this.all,this),t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.all=function(){var e;return e={},e[this.thatFkAttr]=this.record.id,e[this.thatTypeAttr]=this.model.modelName,this.otherModel.findByAttributes(e)},t.prototype.createFromValues=function(e){var t;return t=this.otherModel.initInstance(e),this.add(t),t},t.prototype.add=function(e){return e.set(this.thatFkAttr,this.record.id),e.set(this.thatTypeAttr,this.model.modelName),e.save()},t.prototype.remove=function(e){return e.set(this.thatFkAttr,null),e.set(this.thatTypeAttr,null),e.save()},t.prototype.contains=function(e){var t;return t={},t[this.thatFkAttr]=this.record.id,t[this.thatTypeAttr]=this.model.modelName,this.otherModel.findByAttributes(t).length!==0},t}(t)}).call(this)}),e.define("/model-manytomanycollection.coffee",function(e,t,n,r,i,s,o){(function(){var t,r,i=function(e,t){return function(){return e.apply(t,arguments)}},s={}.hasOwnProperty,o=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};t=e("./model-instancecollection").InstanceCollection,n.ManyToManyCollection=r=function(e){function t(){return this.release=i(this.release,this),this.onModelChange=i(this.onModelChange,this),this.contains=i(this.contains,this),this.remove=i(this.remove,this),this.createFromValues=i(this.createFromValues,this),this.add=i(this.add,this),this.all=i(this.all,this),t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.init=function(){return this.bindEvents([this.linkModel])},t.prototype.all=function(){var e,t,n,r,i;t=this.linkModel.findByAttribute(this.thisFkAttr,this.record.id),i=[];for(n=0,r=t.length;n<r;n++)e=t[n],i.push(this.otherModel.findById(e[this.thatFkAttr]));return i},t.prototype.add=function(e){var t,n;n={},n[this.thisFkAttr]=this.record.id,n[this.thatFkAttr]=e.id;if(this.linkModel.findByAttributes(n).length===0)return t=this.linkModel.initInstance(),t.set(this.thisFkAttr,this.record.id),t.set(this.thatFkAttr,e.id),t.save(),t},t.prototype.createFromValues=function(e){var t;return t=this.otherModel.initInstance(e),t.save(),this.add(t),t},t.prototype.remove=function(e){var t,n,r,i,s,o;r={},r[this.thisFkAttr]=this.record.id,r[this.thatFkAttr]=e.id,n=this.linkModel.findByAttributes(r),o=[];for(i=0,s=n.length;i<s;i++)t=n[i],o.push(t.destroy());return o},t.prototype.contains=function(e){var t;return t={},t[this.thisFkAttr]=this.record.id,t[this.thatFkAttr]=e.id,this.linkModel.findByAttributes(t).length!==0},t.prototype.onModelChange=function(e){var t;if(e.get(this.thisFkAttr)===this.record.id)return t=this.otherModel.findById(e[this.thatFkAttr]),this.trigger("change",t)},t.prototype.release=function(){return this.unBindEvents([this.linkModel]),t.__super__.release.apply(this,arguments)},t}(t)}).call(this)}),e.define("/model-manytomanypolycollection.coffee",function(e,t,n,r,i,s,o){(function(){var t,r,i=function(e,t){return function(){return e.apply(t,arguments)}},s={}.hasOwnProperty,o=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};t=e("./model-instancecollection").InstanceCollection,n.ManyToManyPolyCollection=r=function(e){function t(){return this.release=i(this.release,this),this.onModelChange=i(this.onModelChange,this),this.contains=i(this.contains,this),this.remove=i(this.remove,this),this.add=i(this.add,this),this.createFromValues=i(this.createFromValues,this),this.all=i(this.all,this),t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.init=function(){return this.bindEvents([this.linkModel])},t.prototype.all=function(){var e,t,n,r,i,s;n={},n[this.thisFkAttr]=this.record.id,n[this.thatTypeAttr]=this.otherModel.modelName,t=this.linkModel.findByAttributes(n),s=[];for(r=0,i=t.length;r<i;r++)e=t[r],s.push(this.otherModel.findById(e[this.thatFkAttr]));return s},t.prototype.createFromValues=function(e){var t;return t=this.otherModel.initInstance(e),t.save(),this.add(t),t},t.prototype.add=function(e){var t,n;n={},n[this.thisFkAttr]=this.record.id,n[this.thatFkAttr]=e.id,n[this.thatTypeAttr]=this.otherModel.modelName;if(this.linkModel.findByAttributes(n).length===0)return t=this.linkModel.initInstance(),t.set(this.thisFkAttr,this.record.id),t.set(this.thatFkAttr,e.id),t.set(this.thatTypeAttr,this.otherModel.modelName),t.save(),t},t.prototype.remove=function(e){var t,n,r,i,s,o;n={},n[this.thisFkAttr]=this.record.id,n[this.thatFkAttr]=e.id,n[this.thatTypeAttr]=this.otherModel.modelName,s=this.linkModel.findByAttributes(n),o=[];for(r=0,i=s.length;r<i;r++)t=s[r],o.push(t.destroy());return o},t.prototype.contains=function(e){var t;return t={},t[this.thisFkAttr]=this.record.id,t[this.thatFkAttr]=e.id,t[this.thatTypeAttr]=this.otherModel.modelName,this.linkModel.findByAttributes(t).length!==0},t.prototype.onModelChange=function(e){var t;if(e[this.thisFkAttr]===this.record.id&&e[this.thatTypeAttr]===this.otherModel.modelName)return t=this.otherModel.findById(e[this.thatFkAttr]),this.trigger("change",t)},t.prototype.release=function(){return this.unBindEvents([this.linkModel]),t.__super__.release.apply(this,arguments)},t}(t)}).call(this)}),e.define("/model-manytomanypolyreversecollection.coffee",function(e,t,n,r,i,s,o){(function(){var t,r,i=function(e,t){return function(){return e.apply(t,arguments)}},s={}.hasOwnProperty,o=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};t=e("./model-instancecollection").InstanceCollection,n.ManyToManyPolyReverseCollection=r=function(e){function t(){return this.release=i(this.release
,this),this.onModelChange=i(this.onModelChange,this),this.contains=i(this.contains,this),this.remove=i(this.remove,this),this.add=i(this.add,this),this.createFromValues=i(this.createFromValues,this),this.all=i(this.all,this),t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.init=function(){return this.bindEvents([this.linkModel])},t.prototype.all=function(){var e,t,n,r,i,s;n={},n[this.thatFkAttr]=this.record.id,n[this.thatTypeAttr]=this.model.modelName,t=this.linkModel.findByAttributes(n),s=[];for(r=0,i=t.length;r<i;r++)e=t[r],s.push(this.otherModel.findById(e[this.thisFkAttr]));return s},t.prototype.createFromValues=function(e){var t;return t=this.otherModel.initInstance(e),t.save(),this.add(t),t},t.prototype.add=function(e){var t,n;n={},n[this.thisFkAttr]=e.id,n[this.thatFkAttr]=this.record.id,n[this.thatTypeAttr]=this.model.modelName;if(this.linkModel.findByAttributes(n).length===0)return t=this.linkModel.initInstance(),t.set(this.thisFkAttr,e.id),t.set(this.thatFkAttr,this.record.id),t.set(this.thatTypeAttr,this.model.modelName),t.save(),t},t.prototype.remove=function(e){var t,n,r,i,s,o;n={},n[this.thisFkAttr]=e.id,n[this.thatFkAttr]=this.record.id,n[this.thatTypeAttr]=this.model.modelName,s=this.linkModel.findByAttributes(n),o=[];for(r=0,i=s.length;r<i;r++)t=s[r],o.push(t.destroy());return o},t.prototype.contains=function(e){var t;return t={},t[this.thisFkAttr]=e.id,t[this.thatFkAttr]=this.record.id,t[this.thatTypeAttr]=this.model.modelName,this.linkModel.findByAttributes(t).length!==0},t.prototype.onModelChange=function(e){var t;if(e[this.thatFkAttr]===this.record.id&&e[this.thatTypeAttr]===this.model.modelName)return t=this.model.findById(e[this.thisFkAttr]),this.trigger("change",t)},t.prototype.release=function(){return this.unBindEvents([this.linkModel]),t.__super__.release.apply(this,arguments)},t}(t)}).call(this)}),e.define("/model-ajax.coffee",function(e,t,n,r,i,s,o){(function(){var t,n,r,i;t=e("./model").Model,n=e("./util"),i={},r={},t.extend({ajax:function(e){var t,s,o,u,a,f,l,c,h;f=["url","interface","plural"];for(s=0,o=f.length;s<o;s++)t=f[s],e[t]!=null&&(this[t]=e[t]);return this.bind("load",this.loadServer),this.bind("create",this.createServer),this.bind("update",this.updateServer),this.bind("destroy",this.destroyServer),(l=i[u=this.modelName])==null&&(i[u]={}),(c=r[a=this.modelName])==null&&(r[a]={}),(h=Mozart.Ajax)==null&&(Mozart.Ajax=Mozart.MztObject.create({handleError:function(e,t,r,i){switch(e.status){case 401:return Mozart.Ajax.trigger("httpAuthorizationRequired",r,e);case 404:return Mozart.Ajax.trigger("httpForbidden",r,e);default:return n.error("Model.Ajax.handleError",e,t,i)}}})),this.instanceClass.extend({getServerId:function(){return this.modelClass.getServerId(this.id)},existsOnServer:function(){return this.modelClass.getServerId(this.id)!=null},loadServer:function(){return this.modelClass.load(this.modelClass.getServerId(this.id))}})},registerServerId:function(e,t){if(i[this.modelName]==null)throw new Error("Model.registerServerId: "+this.modelName+" is not registered for ajax.");return i[this.modelName][t]=e,r[this.modelName][e]=t},unRegisterServerId:function(e,t){return delete i[this.modelName][t],delete r[this.modelName][e]},getServerId:function(e){return r[this.modelName][e]},getClientId:function(e){return i[this.modelName][e]},toServerObject:function(e){var n,r,i,s,o,u,a,f;i={},u=this.attrs;for(n in u)s=u[n],n!=="id"&&(i[n]=e[n]);i.id=this.getServerId(e.id),a=this.fks;for(n in a)r=a[n],i[n]=r.getServerId(e[n]);f=this.polyFks;for(n in f)o=f[n],e[o]!=null?i[n]=t.models[e[o]].getServerId(e[n]):i[n]=null;return i},toClientObject:function(e){var n,r,i,s,o,u,a,f;i={},u=this.attrs;for(n in u)s=u[n],n!=="id"&&typeof e[n]!="undefined"&&(i[n]=e[n]);i.id=this.getClientId(e.id),a=this.fks;for(n in a)r=a[n],typeof e[n]!="undefined"&&(i[n]=r.getClientId(e[n]),typeof i[n]=="undefined"&&(i[n]=null));f=this.polyFks;for(n in f)o=f[n],typeof e[n]!="undefined"&&e[o]!=null?i[n]=t.models[e[o]].getClientId(e[n]):i[n]=null;return i},loadServer:function(e){var t;t=e.modelClass.getServerId(e.id);if(t==null)return;return e.modelClass.load(t)},createServer:function(e){return e.modelClass.createAjax(e.id,e.modelClass.toServerObject(e))},updateServer:function(e){var t;t=e.modelClass.getServerId(e.id);if(t==null)return;return e.modelClass.updateAjax(t,e.id,e.modelClass.toServerObject(e))},destroyServer:function(e){var t;t=e.modelClass.getServerId(e.id);if(t==null)return;return e.modelClass.destroyAjax(e.modelClass.getServerId(e.id),e.id)},loadAll:function(){var e,t,r;return r=function(e,t,n){var r,i,s;this.model.plural!=null&&(e=e[this.model.plural]);for(i=0,s=e.length;i<s;i++)r=e[i],this.model._processLoad(r,this.model,t);return this.model.trigger("loadAllComplete")},t=function(e,t,n){return Mozart.Ajax.handleError(e,t,this,n)},e=function(e,t){return n.log("ajax","Model.loadAll.onComplete",e,t)},$.ajax({url:this.url,type:"GET",success:r,error:t,complete:e,context:{model:this},dataType:"json",contentType:"application/json"})},load:function(e){var t,r,i;return i=function(e,t,n){return this.model.plural!=null&&(e=e[this.model.plural]),this.model._processLoad(e,this.model,t)},r=function(e,t,n){return Mozart.Ajax.handleError(e,t,this,n)},t=function(e,t){return n.log("ajax","Model.load.onComplete",e,t)},$.ajax({url:this.url+"/"+e,type:"GET",success:i,error:r,complete:t,context:{model:this,id:e},dataType:"json",contentType:"application/json"})},_processLoad:function(e,t,r){var i,s,o;return o=e.id,i=t.toClientObject(e),s=t.findById(i.id),s==null&&(s=t.initInstance(e)),t.registerServerId(s.id,o),s.copyFrom(i),s.save({disableModelCreateEvent:!0,disableModelUpdateEvent:!0}),n.log("ajax","Model._processLoad.onSuccess",r,e),t.trigger("loadComplete",s)},createAjax:function(e,t){var r,i,s;return s=function(t,r,i){return this.model.registerServerId(this.clientId,t.id),n.log("ajax","Model.createAjax.onSuccess",r,t),this.model.trigger("createComplete",this.model.findById(e))},i=function(e,t,n){return Mozart.Ajax.handleError(e,t,this,n)},r=function(e,t){return n.log("ajax","Model.createAjax.onComplete",e,t)},$.ajax({url:this.url,type:"POST",data:JSON.stringify(t),success:s,error:i,complete:r,context:{model:this,clientId:e},dataType:"json",contentType:"application/json"})},updateAjax:function(e,t,r){var i,s,o;return o=function(e,r,i){return n.log("ajax","Model.updateAjax.onSuccess",r,e),this.model.trigger("updateComplete",this.model.findById(t))},s=function(e,t,n){return Mozart.Ajax.handleError(e,t,this,n)},i=function(e,t){return n.log("ajax","Model.updateAjax.onComplete",e,t)},$.ajax({url:this.url+"/"+e,type:"PUT",data:JSON.stringify(r),success:o,error:s,complete:i,context:{model:this,clientId:this.clientId,serverId:this.serverId},dataType:"json",contentType:"application/json"})},destroyAjax:function(e,t){var r,i,s;return s=function(r,i,s){return this.model.unRegisterServerId(t,e),n.log("ajax","Model.destroyAjax.onSuccess",i,r),this.model.trigger("destroyComplete",e)},i=function(e,t,n){return Mozart.Ajax.handleError(e,t,this,n)},r=function(e,t){return n.log("ajax","Model.destroyAjax.onComplete",e,t)},$.ajax({url:this.url+"/"+e,type:"DELETE",success:s,error:i,complete:r,context:{model:this,clientId:t,serverId:e},dataType:"json",contentType:"application/json"})}})}).call(this)}),e.define("/model.coffee",function(e,t,n,r,i,s,o){(function(){var t,r,i,s,o,u,a,f,l,c,h,p=function(e,t){return function(){return e.apply(t,arguments)}},d={}.hasOwnProperty,v=function(e,t){function r(){this.constructor=e}for(var n in t)d.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};h=e("./util"),f=e("./object").MztObject,t=e("./data-index").DataIndex,r=e("./model-instance").Instance,i=e("./model-instancecollection").InstanceCollection,l=e("./model-onetomanycollection").OneToManyCollection,c=e("./model-onetomanypolycollection").OneToManyPolyCollection,s=e("./model-manytomanycollection").ManyToManyCollection,o=e("./model-manytomanypolycollection").ManyToManyPolyCollection,u=e("./model-manytomanypolyreversecollection").ManyToManyPolyReverseCollection,n.Model=a=function(e){function n(){return this.index=p(this.index,this),this._generateId=p(this._generateId,this),this._getInstance=p(this._getInstance,this),this.toSnakeCase=p(this.toSnakeCase,this),this.destroyInstance=p(this.destroyInstance,this),this.updateInstance=p(this.updateInstance,this),this.createInstance=p(this.createInstance,this),this.loadInstance=p(this.loadInstance,this),this.createFromValues=p(this.createFromValues,this),this.initInstance=p(this.initInstance,this),this.exists=p(this.exists,this),this.findByAttributes=p(this.findByAttributes,this),this.findByAttribute=p(this.findByAttribute,this),this.selectAsMap=p(this.selectAsMap,this),this.selectIds=p(this.selectIds,this),this.select=p(this.select,this),this.findAll=p(this.findAll,this),this.findById=p(this.findById,this),this.count=p(this.count,this),this.allAsMap=p(this.allAsMap,this),this.all=p(this.all,this),this.hasManyThrough=p(this.hasManyThrough,this),this.hasMany=p(this.hasMany,this),this.belongsToPoly=p(this.belongsToPoly,this),this.belongsTo=p(this.belongsTo,this),this.polyForeignKeys=p(this.polyForeignKeys,this),this.foreignKeys=p(this.foreignKeys,this),this.attributes=p(this.attributes,this),this.reset=p(this.reset,this),n.__super__.constructor.apply(this,arguments)}return v(n,e),n.idCount=1,n.indexForeignKeys=!0,n.models={},n.prototype.toString=function(){return"Model: "+this.modelName},n.prototype.init=function(){var e;if(this.modelName==null)throw new Error("Model must have a modelName");return this.records={},this.fks={},this.polyFks={},this.attrs={id:"integer"},this.relations={},this.indexes={},n.models[this.modelName]=this,this.instanceClass=e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return v(t,e),t}(r)},n.prototype.reset=function(){var e,t,n;n=this.records;for(e in n)t=n[e],t.release();return this.records={},this.rebuildAllIndexes()},n.prototype.attributes=function(e){var t,n,r;r=[];for(t in e)n=e[t],r.push(this.attrs[t]=n);return r},n.prototype.hasAttribute=function(e){return this.attrs[e]!=null||this.fks[e+"_id"]!=null},n.prototype.hasRelation=function(e){return this.relations[e]!=null},n.prototype.foreignKeys=function(e){var t,r,i;i=[];for(t in e)r=e[t],this.fks[t]=r,n.DataIndexForeignKeys?i.push(this.index(t)):i.push(void 0);return i},n.prototype.polyForeignKeys=function(e){var t,r,i;i=[];for(t in e)r=e[t],this.polyFks[t]=r,n.DataIndexForeignKeys?i.push(this.index(t)):i.push(void 0);return i},n.prototype.belongsTo=function(e,t,n){var r,i,s,o,u;return t==null&&t==null&&(t=this.toSnakeCase(e.modelName)),i={},n==null&&(n=t+"_id"),i[n]="integer",this.attributes(i),s={},s[n]=e,this.foreignKeys(s),o={},o[t]=function(r){var i;if(arguments.length===1){if(r===null||r.modelClass!=null&&r.modelClass===e)return r!=null?this.set(n,r.id):this.set(n,null);throw new Error("Cannot assign "+r+" to belongsTo "+this.modelClass.modelName+":"+t+" (Value is not an Instance or incorrect ModelClass)")}return i=this[n],i==null?null:e.findById(i)},this.instanceClass.extend(o),r=this,u=function(t){var r,i,s,o,u;o=e.findByAttribute(n,t.id),u=[];for(i=0,s=o.length;i<s;i++)r=o[i],r.set(n,null),u.push(r.save());return u},e.bind("destroy",u)},n.prototype.hasOne=function(e,t,n){var r,i,s,o;return t==null&&(t=this.toSnakeCase(this.modelName)),i={},n==null&&(n=t+"_id"),i[n]="integer",e.attributes(i),s={},s[n]=this,e.foreignKeys(s),this.instanceClass.prototype[t]=function(r){var i,s,o,u,a;if(arguments.length===1){a=e.findByAttribute(n,this.id);for(o=0,u=a.length;o<u;o++)i=a[o],i!==r&&(i.set(n,null),i.save());if(r===null)return;return r.set(n,this.id),r.save(),this.trigger("change:"+t),this.trigger("change")}return s=e.findByAttribute(n,this.id),s.length>0?s[0]:null},r=this,o=function(t){var r,i,s,o,u;o=e.findByAttribute(n,t.id),u=[];for(i=0,s=o.length;i<s;i++)r=o[i],r.set(n,null),u.push(r.save());return u},this.bind("destroy",o)},n.prototype.belongsToPoly=function(e,t,r,i){var s,o,u,a,f,l,c,p,d;t==null&&(t=this.toSnakeCase(a.modelName)),o={},r==null&&(r=t+"_id"),o[r]="integer",i==null&&(i=t+"_type"),o[i]="string",this[t+"_allowed_models"]=e,this.attributes(o),u={},u[r]=i,this.polyForeignKeys(u),f={},f[t]=function(t,s){var o,u;return arguments.length>0?(t!=null?(_.contains(e,t.modelClass)||h.error("Cannot assign a model of type {{value.modelClass.modelName}} to this belongsToPoly - allowed model types are "+e.join(", ")),this.set(r,t.id),this.set(i,t.modelClass.modelName)):(this[r]=null,this[i]=null),this.save(s)):(o=this[r],u=n.models[this[i]],o==null||u==null?null:u.findById(o))},this.instanceClass.extend(f),s=this,l=function(e,t){var n,o,u,a,f,l;t==null&&(t={}),o={},o[r]=e.id,o[i]=e.modelClass.modelName,f=s.findByAttributes(o),l=[];for(u=0,a=f.length;u<a;u++)n=f[u],n.set(r,null),n.set(i,null),l.push(n.save(t));return l},d=[];for(c=0,p=e.length;c<p;c++)a=e[c],d.push(a.bind("destroy",l));return d},n.prototype.hasMany=function(e,t,n){var r,i,s,o,u;return t==null&&(t=this.toSnakeCase(e.modelName)),i={},n==null&&(n=this.toSnakeCase(this.modelName+"_id")),i[n]="integer",e.attributes(i),s={},s[n]=this,e.foreignKeys(s),this.relations[t]={type:"hasMany",otherModel:e,foreignKeyAttribute:n},r=this,o={},o[t]=function(i){if(arguments.length>0)throw new Error("Cannot set a hasMany relation");return this[t+"_hasMany_collection"]==null&&(this[t+"_hasMany_collection"]=l.create({record:this,attribute:this.attribute,model:r,otherModel:e,fkname:n})),this[t+"_hasMany_collection"]},this.instanceClass.extend(o),u=function(t,r){var i,s,o,u,a;r==null&&(r={}),u=e.findByAttribute(n,t.id),a=[];for(s=0,o=u.length;s<o;s++)i=u[s],i.set(n,null),a.push(i.save(r));return a},this.bind("destroy",u)},n.prototype.hasManyPoly=function(e,t,n,r){var i,s,o,u;return t==null&&(t=this.toSnakeCase(e.modelName)),n==null&&(n=t+"_id"),r==null&&(r=t+"_type"),s={},s[n]="integer",s[r]="string",e.attributes(s),o={},o[n]=r,e.polyForeignKeys(o),this.relations[t]={type:"hasManyPoly",otherModel:e,foreignKeyAttribute:n,foreignModelTypeAttribute:r},i=this,this.instanceClass.prototype[t]=function(s){if(arguments.length>0)throw new Error("Cannot set a hasManyPoly relation");return this[t+"_hasManyPoly_collection"]==null&&(this[t+"_hasManyPoly_collection"]=c.create({record:this,model:i,otherModel:e,thatFkAttr:n,thatTypeAttr:r})),this[t+"_hasManyPoly_collection"]},u=function(t,s){var o,u,a,f,l,c;s==null&&(s={}),u={},u[n]=t.id,u[r]=i.modelName,l=e.findByAttributes(u),c=[];for(a=0,f=l.length;a<f;a++)o=l[a],o.set(n,null),o.set(r,null),c.push(o.save(s));return c},this.bind("destroy",u)},n.prototype.hasManyThrough=function(e,t,n,r,i){var o,u,a,f,l;return t==null&&(t=this.toSnakeCase(e.modelName)),u={},r==null&&(r=this.toSnakeCase(this.modelName+"_id")),i==null&&(i=this.toSnakeCase(e.modelName)+"_id"),u[r]="integer",u[i]="integer",n.attributes(u),a={},a[r]=this,a[i]=e,n.foreignKeys(a),this.relations[t]={type:"hasManyThrough",otherModel:e,linkModel:n,foreignKeyAttribute:r,otherModelForeignKeyAttribute:i},o=this,this.instanceClass.prototype[t]=function(u){if(arguments.length>0)throw new Error("Cannot set a hasManyThrough relation");return this[t+"_hasManyThrough_collection"]==null&&(this[t+"_hasManyThrough_collection"]=s.create({record:this,model:o,otherModel:e,linkModel:n,thisFkAttr:r,thatFkAttr:i})),this[t+"_hasManyThrough_collection"]},l=function(e,t){var i,s,o,u,a;t==null&&(t={}),u=n.findByAttribute(r,e.id),a=[];for(s=0,o=u.length;s<o;s++)i=u[s],a.push(i.destroy(t));return a},this.bind("destroy",l),f=function(e,t){var r,s,o,u,a;t==null&&(t={}),u=n.findByAttribute(i,e.id),a=[];for(s=0,o=u.length;s<o;s++)r=u[s],a.push(r.destroy(t));return a},e.bind("destroy",f)},n.prototype.hasManyThroughPoly=function(e,t,n,r,i,s){var u,a,f,l,c;return t==null&&(t=this.toSnakeCase(e.modelName)),r==null&&(r=this.toSnakeCase(this.modelName+"_id")),i==null&&(i=t+"_id"),s==null&&(s=t+"_type"),a={},a[r]="integer",a[i]="integer",a[s]="string",n.attributes(a),f={},f[r]=this,n.foreignKeys(f),f={},f[i]=s,n.polyForeignKeys(f),this.relations[t]={type:"hasManyThroughPoly",otherModel:e,linkModel:n,foreignKeyAttribute:r,otherModelForeignKeyAttribute:i,otherModelModelTypeAttribute:s},u=this,this.instanceClass.prototype[t]=function(a){if(arguments.length>0)throw new Error("Cannot set a hasManyThroughPoly relation");return this[t+"_hasManyThroughPoly_collection"]==null&&(this[t+"_hasManyThroughPoly_collection"]=o.create({record:this,model:u,otherModel:e,linkModel:n,thisFkAttr:r,thatFkAttr:i,thatTypeAttr:s})),this[t+"_hasManyThroughPoly_collection"]},c=function(e,t){var i,s,o,u,a,f;t==null&&(t={}),s={},s[r]=e.id,a=n.findByAttributes(s),f=[];for(o=0,u=a.length;o<u;o++)i=a[o],f.push(i.destroy(t));return f},this.bind("destroy",c),l=function(e,t){var r,o,u,a,f,l;t==null&&(t={}),o={},o[i]=e.id,o[s]=e.modelClass.modelName,f=n.findByAttributes(o),l=[];for(u=0,a=f.length;u<a;u++)r=f[u],l.push(r.destroy(t));return l},e.bind("destroy",l)},n.prototype.hasManyThroughPolyReverse=function(e,t,n,r,i,s){var o;return t==null&&(t=this.toSnakeCase(e.modelName)),r==null&&(r=this.toSnakeCase(this.modelName+"_id")),i==null&&(i=t+"_id"),s==null&&(s=t+"_type"),this.relations[t]={type:"hasManyThroughPolyReverse",otherModel:e,linkModel:n,foreignKeyAttribute:r,otherModelForeignKeyAttribute:i,otherModelModelTypeAttribute:s},(n.fks[r]==null||n.polyFks[i]==null||n.polyFks[i]===(s!=null))&&console.error("WARNING: hasManyThroughPolyReverse - "+r+", "+i+" or "+s+" do not exist on link model '"+n.modelName+"' - there should be an existing hasManyThroughPoly to support this hasManyThroughPolyReverse"),o=this,this.instanceClass.prototype[t]=function(a){if(arguments.length>0)throw new Error("Cannot set a hasManyThroughPolyReverse relation");return this[t+"_hasManyThroughPolyReverse_collection"]==null&&(this[t+"_hasManyThroughPolyReverse_collection"]=u.create({record:this,model:o,otherModel:e,linkModel:n,thisFkAttr:r,thatFkAttr:i,thatTypeAttr:s})),this[t+"_hasManyThroughPolyReverse_collection"]}},n.prototype.all=function(){return _(this.records).values()},n.prototype.allAsMap=function(){return this.records},n.prototype.count=function(){return _(this.records).keys().length},n.prototype.findById=function(e){return e==null?void 0:this.records[e]},n.prototype.findAll=function(e){var t,n,r,i;n=[];for(r=0,i=e.length;r<i;r++)t=e[r],this.exists(t)!=null&&n.push(this.records[t]);return n},n.prototype.select=function(e){return this.findAll(this.selectIds(e))},n.prototype.selectIds=function(e){var t,n,r,i;r=[],i=this.records;for(t in i)n=i[t],e(n)&&r.push(t);return r},n.prototype.selectAsMap=function(e){var t,n,r,i;r={},i=this.records;for(t in i)n=i[t],e(n)&&(r[t]=n);return r},n.prototype.findByAttribute=function(e,t){var n;return n={},n[e]=t,this.findByAttributes(n)},n.prototype.findByAttributes=function(e){var t,n,r,i,s,o,u,a,f=this;o=[];for(t in e)a=e[t],this.hasIndex(t)?o.push(this.getIndexFor(t,a)):o.push(this.selectAsMap(function(e){return e[t]===a}));i=o.pop()||{};while(o.length>0){u=o.pop(),s={};for(n in u)r=u[n],i[n]!=null&&(s[n]=r);i=s}return _(i).values()},n.prototype.exists=function(e){return this.records[e]!=null},n.prototype.initInstance=function(e){var t,n,r,i;t=this._getInstance(),i=this.attrs;for(n in i)r=i[n],e!=null&&e[n]!=null?t.set(n,e[n]):t.set(n,null);return t.set("id",this._generateId()),t},n.prototype.createFromValues=function(e){var t;return t=this.initInstance(e),t.save(),t},n.prototype.loadInstance=function(e,t){return t==null&&(t={}),this.trigger("load",e)},n.prototype.createInstance=function(e,t){var n;return t==null&&(t={}),n=e.id,this.exists(n)&&h.error("createInstance: ID Already Exists","collection","model",this.name,"id",n),this.records[n]=e,this.addToIndexes(e),t.disableModelCreateEvent||this.trigger("create",e,t),t.disableModelChangeEvent||this.trigger("change",e,t),e},n.prototype.updateInstance=function(e,t){var n;t==null&&(t={}),t.disableModelUpdateEvent||this.trigger("update",e,t),t.disableModelChangeEvent||this.trigger("change",e,t),n=e.id;if(!this.exists(n))return h.error("updateInstance: ID does not exist","collection","model",this.name,"id",n)},n.prototype.destroyInstance=function(e,t){var n;t==null&&(t={}),n=e.id,this.exists(n)||h.error("destroyInstance: ID does not exist","collection","model",this.name,"id",n),delete this.records[e.id],e.modelClass.removeFromIndexes(e),t.disableModelDestroyEvent||this.trigger("destroy",e,t);if(!t.disableModelChangeEvent)return this.trigger("change",e,t)},n.prototype.toSnakeCase=function(e){var t,n=this;return t=e.replace(/[A-Z]{1,1}/g,function(e){return"_"+e.toLowerCase()}),t.replace(/^_/,"")},n.prototype._getInstance=function(){return this.instanceClass.create({modelClass:this})},n.prototype._generateId=function(){return"c-"+n.idCount++},n.prototype.index=function(e,n,r){var i;n==null&&(n="map");if(this.indexes[e]==null){i=t.getIndexClassType(n);if(i!=null)return this.indexes[e]=i.create({modelClass:this,attribute:e,options:r});throw new Error("Model: Index Type "+n+" is not supported")}return this.rebuildIndex(e)},n.prototype.hasIndex=function(e){return this.indexes[e]!=null},n.prototype.getIndexFor=function(e,t){if(this.indexes[e]==null)throw new Error("Model.rebuildIndex: Index "+e+" does not exist");return this.indexes[e].load(t)},n.prototype.updateIndex=function(e,t,n,r){if(this.indexes[e]==null)throw new Error("Model.rebuildIndex: Index "+e+" does not exist");return this.indexes[e].update(t,n,r)},n.prototype.addToIndexes=function(e){var t,n,r,i;r=this.indexes,i=[];for(t in r)n=r[t],i.push(n.add(e));return i},n.prototype.removeFromIndexes=function(e){var t,n,r,i;r=this.indexes,i=[];for(t in r)n=r[t],i.push(n.remove(e));return i},n.prototype.rebuildIndex=function(e){if(this.indexes[e]==null)throw new Error("Model.rebuildIndex: Index "+e+" does not exist");return this.indexes[e].rebuild()},n.prototype.dropIndex=function(e){return delete this.indexes[e]},n.prototype.rebuildAllIndexes=function(){var e,t,n,r,i;r=_(this.indexes).keys(),i=[];for(t=0,n=r.length;t<n;t++)e=r[t],i.push(this.rebuildIndex(e));return i},n}(f)}).call(this)}),e.define("/model-localstorage.coffee",function(e,t,n,r,i,s,o){(function(){var t,n,r,i;t=e("./model").Model,n=e("./util"),i={},r={},t.extend({localStorage:function(e){var t,n,s,o,u,a,f,l,c;window.localStorage==null&&Mozart.error(this.modelName+".localStorage - localStorage not available in this browser"),e==null&&(e={}),(a=e.prefix)==null&&(e.prefix="MozartLS"),this.localStorageOptions=e,this.bind("load",this.loadLocalStorage),this.bind("create",this.createLocalStorage),this.bind("update",this.updateLocalStorage),this.bind("destroy",this.destroyLocalStorage),(f=i[o=this.modelName])==null&&(i[o]={}),(l=r[u=this.modelName])==null&&(r[u]={}),(c=Mozart.LocalStorage)==null&&(Mozart.LocalStorage=Mozart.MztObject.create({handleError:function(e,t,n){return Mozart.LocalStorage.trigger("notFound",e,t,n)}})),s=this.getLocalStoragePrefix(),this.instanceClass.extend({getLocalStorageId:function(){return this.modelClass.getLocalStorageId(this.id)},existsInLocalStorage:function(){var e;return e=this.modelClass.getLocalStorageId(this.id),window.localStorage[this+("-"+e)]!=null},loadLocalStorage:function(){return this.modelClass.loadLocalStorage(this)}}),n=window.localStorage[s+"-nextPK"],n==null&&(window.localStorage[s+"-nextPK"]="1"),t=window.localStorage[s+"-index"];if(t==null)return window.localStorage[s+"-index"]="[]"},getLocalStoragePrefix:function(){return this.localStorageOptions.prefix+"-"+this.modelName},registerLocalStorageId:function(e,t){if(i[this.modelName]==null)throw new Error("Model.registerLocalStorageId: "+this.modelName+" is not registered for localStorage.");return i[this.modelName][t]=e,r[this.modelName][e]=t},unRegisterLocalStorageId:function(e,t){return delete i[this.modelName][t],delete r[this.modelName][e]},getLocalStorageId:function(e){return r[this.modelName][e]},getLocalStorageClientId:function(e){return i[this.modelName][e]},toLocalStorageObject:function(e){var n,r,i,s,o,u,a,f;i={},u=this.attrs;for(n in u)s=u[n],n!=="id"&&(i[n]=e[n]);i.id=this.getLocalStorageId(e.id),a=this.fks;for(n in a)r=a[n],i[n]=r.getLocalStorageId(e[n]);f=this.polyFks;for(n in f)o=f[n],e[o]!=null?i[n]=t.models[e[o]].getLocalStorageId(e[n]):i[n]=null;return i},toLocalStorageClientObject:function(e){var n,r,i,s,o,u,a,f;i={},u=this.attrs;for(n in u)s=u[n],n!=="id"&&(i[n]=e[n]);i.id=this.getLocalStorageClientId(e.id),a=this.fks;for(n in a)r=a[n],i[n]=r.getLocalStorageClientId(e[n]),typeof i[n]=="undefined"&&(i[n]=null);f=this.polyFks;for(n in f)o=f[n],e[o]!=null?i[n]=t.models[e[o]].getLocalStorageClientId(e[n]):i[n]=null;return i},loadAllLocalStorage:function(){var e,t,r,i,s,o;i=this.getLocalStoragePrefix(),t=JSON.parse(window.localStorage[i+"-index"]);for(s=0,o=t.length;s<o;s++)r=t[s],e=JSON.parse(window.localStorage[i+("-"+r)]),this._processLocalStorageLoad(r,e,this);return this.trigger("loadAllLocalStorageComplete"),n.log("localStorage","Model.loadAllLocalStorage.onComplete")},loadLocalStorage:function(e){var t;return t=e.modelClass.getLocalStorageId(e.id),this.loadLocalStorageId(t)},loadLocalStorageId:function(e){var t,n;return n=this.getLocalStoragePrefix(),t=window.localStorage[n+("-"+e)],t==null&&Mozart.LocalStorage.handleError(this,e,"record does not exist"),t=JSON.parse(t),t.id=e,this._processLocalStorageLoad(e,t,this)},_processLocalStorageLoad:function(e,t,r){var i,s,o;return i=r.getLocalStorageClientId(e),s=r.toLocalStorageClientObject(t),i!=null?(o=r.findById(i),o.copyFrom(s)):o=r.initInstance(t),o.save({disableModelCreateEvent:!0,disableModelUpdateEvent:!0}),r.registerLocalStorageId(o.id,e),n.log("localStorage","Model._processLocalStorageLoad.onSuccess",t,r),r.trigger("loadLocalStorageComplete",o)},createLocalStorage:function(e){var t,r,i,s;return t=e.modelClass.toLocalStorageObject(e),s=e.modelClass.getLocalStoragePrefix(),i=parseInt(window.localStorage[s+"-nextPK"]),window.localStorage[s+"-nextPK"]=(i+1).toString(),window.localStorage[s+("-"+i)]=JSON.stringify(t),e.modelClass.registerLocalStorageId(e.id,i),r=JSON.parse(window.localStorage[s+"-index"]),r.push(i),window.localStorage[s+"-index"]=JSON.stringify(r),n.log("localStorage","Model.createLocalStorageComplete",e),e.modelClass.trigger("createLocalStorageComplete",e)},updateLocalStorage:function(e){var t,r,i;r=e.modelClass.getLocalStorageId(e.id);if(r==null)return;return t=e.modelClass.toLocalStorageObject(e),i=e.modelClass.getLocalStoragePrefix(),window.localStorage[i+("-"+r)]==null&&Mozart.LocalStorage.handleError(e.modelClass,r,"updateLocalStorage: record does not exist"),window.localStorage[i+("-"+r)]=JSON.stringify(t),e.modelClass.trigger("updateLocalStorageComplete",e),n.log("localStorage","Model.updateLocalStorage.onComplete",e)},destroyLocalStorage:function(e){var t,r,i;r=e.modelClass.getLocalStorageId(e.id);if(r==null)return;return i=e.modelClass.getLocalStoragePrefix(),window.localStorage[i+("-"+r)]==null&&Mozart.LocalStorage.handleError(e.modelClass,r,"destroyLocalStorage: record does not exist"),window.localStorage.removeItem(i+("-"+r)),e.modelClass.unRegisterLocalStorageId(e.id,r),t=JSON.parse(window.localStorage[i+"-index"]),t=_.without(t,r),window.localStorage[i+"-index"]=JSON.stringify(t),n.log("localStorage","Model.destroyLocalStorage.onSuccess",e),e.modelClass.trigger("destroyLocalStorageComplete",r)},destroyAllLocalStorage:function(){var e,t,n,s,o;n=this.getLocalStoragePrefix(),t=JSON.parse(window.localStorage[n+"-index"]);for(s=0,o=t.length;s<o;s++)e=t[s],window.localStorage.removeItem(n+("-"+e));return window.localStorage[n+"-index"]="[]",window.localStorage[n+"-nextPK"]="1",i[this.modelName]={},r[this.modelName]={}}})}).call(this)}),e.define("/route.coffee",function(e,t,n,r,i,s,o){(function(){var t,r,i,s=function(e,t){return function(){return e.apply(t,arguments)}},o={}.hasOwnProperty,u=function(e,t){function r(){this.constructor=e}for(var n in t)o.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};i=e("./util"),t=e("./object").MztObject,n.Route=r=function(e){function t(){return this.doTitle=s(this.doTitle,this),this.canEnter=s(this.canEnter,this),this.canExit=s(this.canExit,this),t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.init=function(){this.path!=null&&this.path.length>0||i.warn("Route must have a path",this);if(this.viewClass==null)return i.warn("Route must have a viewClass",this)},t.prototype.canExit=function(){return this.exit==null||this.exit()===!0},t.prototype.canEnter=function(e){return this.enter==null||this.enter(e)===!0},t.prototype.doTitle=function(){if(this.title!=null)return typeof this.title=="function"?document.title=this.title(this):document.title=this.title},t}(t)}).call(this)}),e.define("/switch-view.coffee",function(e,t,n,r,i,s,o){(function(){var t,r,i=function(e,t){return function(){return e.apply(t,arguments)}},s={}.hasOwnProperty,o=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=e("./view").View,n.SwitchView=t=function(e){function t(){return this.beforeRender=i(this.beforeRender,this),t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.beforeRender=function(){var e;return e=HandlebarsTemplates[this.templateBase+"/"+this.content[this.templateField]],e!=null?this.templateFunction=e:(Util.log("views","SwitchView: No view found for "+this.templateBase+"/"+this.content[this.templateField]),this.templateFunction=function(){return""})},t}(r)}).call(this)}),e.define("/cookies.coffee",function(e,t,n,r,i,s,o){(function(){var t,r,i={}.hasOwnProperty,s=function(e,t){function r(){this.constructor=e}for(var n in t)i.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=e("./object").MztObject,n.Cookies=t=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.setCookie=function(e,t,n){var r,i,s,o,u,a;return n=n||{},document.cookie!==void 0&&(n.path||(n.path="/"),o=""+encodeURIComponent(e)+"="+encodeURIComponent(t),u=n.path?";path="+n.path:"",r=n.domain?";domain="+n.domain:"",s=n["max-age"]?";max-age="+n["max-age"]:"",i="",n.expires instanceof Date&&(i=";expires="+n.expires.toUTCString()),a=n.secure?";secure":"",document.cookie=o+u+r+s+i+a),this},t.getCookie=function(e){var t,n,r,i,s,o;n=document.cookie.split(/;\s*/);for(s=0,o=n.length;s<o;s++){t=n[s],i=t.split("="),r=decodeURIComponent(i[0]);if(r===e)return decodeURIComponent(i[1])}return null},t.removeCookie=function(e){var t;return t=new Date,t.setTime(t.getTime()-1),this.setCookie(e,"",{expires:t}),this},t.hasCookie=function(e){return this.getCookie(e)!==null},t}(r)}).call(this)}),e.define("/synapse-mozart-hook.coffee",function(e,t,n,r,i,s,o){(function(){var n,r,i,s=[].slice;n=e("./object").MztObject,i=e("./util"),r=e("./synapse-core"),t.exports=function(){var e;return e=function(){return{registry:{},register:function(e){return this.registry[e.name]=e},unregister:function(e){return delete this.registry[e]},get:function(){var e,t,n,r,i,o;i=arguments[0],r=arguments[1],e=3<=arguments.length?s.call(arguments,2):[],o=r.split("."),r=o[0],n=o[1],n!=null&&(e=[n].concat(e));if(t=this.registry[r])return t.get.apply(i,e)},set:function(){var e,t,n,r,i,o;i=arguments[0],r=arguments[1],e=3<=arguments.length?s.call(arguments,2):[],o=r.split("."),r=o[0],n=o[1],n!=null&&(e=[n].concat(e));if(t=this.registry[r])return t.set.apply(i,e)}}}(),function(){return e.register({name:"attributes",get:function(e){return this.get(e)},set:function(e,t){return this.set(e,t)}})}(),{typeName:"Mozart Object",interfaces:e,checkObjectType:function(e){return r.isObject(e)&&e instanceof n},getHandler:function(e,t){var n;return i.log("synapse","getting "+t+" on ",e,e[t]),n={},r.isFunction(e[t])?n=e[t]():n=e.get(t),n},setHandler:function(e,t,n){return i.log("synapse","setting "+t+": ",n," on ",e),r.isFunction(e[t])?e[t](n):e.set(t,n)},onEventHandler:function(e,t,n){return e.bind(t,n)},offEventHandler:function(e,t,n){return e.unbind(t,n)},triggerEventHandler:function(e,t){return i.log("synapse","triggerEventHandler",e,t),e.trigger(t)},detectEvent:function(e,t){return t!=null&&Object.prototype.hasOwnProperty.call(e,t)||e.__proto__!==void 0&&Object.prototype.hasOwnProperty.call(e.__proto__,t)?"change:"+t:"change"}}}()}).call(this)}),e.define("/synapse-jquery.coffee",function(e,t,n,r,i,s,o){(function(){var n,r=[].slice;n=e("./synapse-core"),t.exports=function(){var e,t,i,s;return s=function(){return{registry:{},register:function(e){return this.registry[e.name]=e},unregister:function(e){return delete this.registry[e]},get:function(
){var e,t,n,i,s,o;s=arguments[0],i=arguments[1],e=3<=arguments.length?r.call(arguments,2):[],o=i.split("."),i=o[0],n=o[1],n!=null&&(e=[n].concat(e));if(t=this.registry[i])return t.get.apply(s,e)},set:function(){var e,t,n,i,s,o;s=arguments[0],i=arguments[1],e=3<=arguments.length?r.call(arguments,2):[],o=i.split("."),i=o[0],n=o[1],n!=null&&(e=[n].concat(e));if(t=this.registry[i])return t.set.apply(s,e)}}}(),function(){var e,t,r,i,o,u;return r=function(t){return this.prop!=null?this.prop(t):e.call(this,t)},u=function(e,t){return this.prop!=null?typeof e=="object"?this.prop(e):this.prop(e,t):i.call(this,e,t)},e=function(e){return this.attr(e)},i=function(e,t){return n.isObject(e)?this.attr(e):this.attr(e,t)},t=function(e){return this.css(e)},o=function(e,t){return n.isObject(e)?this.css(e):this.css(e,t)},s.register({name:"text",get:function(){return this.text()},set:function(e){return this.text((e!=null?e:"").toString())}}),s.register({name:"html",get:function(){return this.html()},set:function(e){return this.html((e!=null?e:"").toString())}}),s.register({name:"value",get:function(){return this.val()},set:function(e){return this.val(e!=null?e:"")}}),s.register({name:"enabled",get:function(){return!r.call(this,"disabled")},set:function(e){return n.isArray(e)&&e.length===0&&(e=!1),u.call(this,"disabled",!Boolean(e))}}),s.register({name:"disabled",get:function(){return r.call(this,"disabled")},set:function(e){return n.isArray(e)&&e.length===0&&(e=!1),u.call(this,"disabled",Boolean(e))}}),s.register({name:"checked",get:function(){return r.call(this,"checked")},set:function(e){return n.isArray(e)&&e.length===0&&(e=!1),u.call(this,"checked",Boolean(e))}}),s.register({name:"visible",get:function(){return t.call(this,"display")===!1},set:function(e){return n.isArray(e)&&e.length===0&&(e=!1),Boolean(e)?this.show():this.hide()}}),s.register({name:"hidden",get:function(){return t.call(this,"display")==="none"},set:function(e){return n.isArray(e)&&e.length===0&&(e=!1),Boolean(e)?this.hide():this.show()}}),s.register({name:"prop",get:function(e){return r.call(this,e)},set:function(e,t){return u.call(this,e,t)}}),s.register({name:"attr",get:function(t){return e.call(this,t)},set:function(e,t){return i.call(this,e,t)}}),s.register({name:"css",get:function(e){return t.call(this,e)},set:function(e,t){return o.call(this,e,t)}}),s.register({name:"data",get:function(e){return this.data(e)},set:function(e,t){return this.data(e,t)}}),s.register({name:"class",get:function(e){return this.hasClass(e)},set:function(e,t){return this.toggleClass(e,Boolean(t))}})}(),e=[["a,button,[type=button],[type=reset]","click"],["select,[type=checkbox],[type=radio],textarea","change"],["[type=submit]","submit"],["input","keyup"]],i=[["[type=checkbox],[type=radio]","checked"],["input,textarea,select","value"]],t=["name","role","data-bind"],{typeName:"jQuery",domEvents:e,elementBindAttributes:t,elementInterfaces:i,interfaces:s,checkObjectType:function(e){return e instanceof $||e.nodeType===1||n.isString(e)},coerceObject:function(e){return $(e)},getHandler:function(e,t){var n;return n=s.get(e,t),n&&e.is("[type=number]")?n.indexOf(".")>-1?parseFloat(n):parseInt(n):n},setHandler:function(e,t,n){return s.set(e,t,n)},onEventHandler:function(e,t,n){return e.bind(t,n)},offEventHandler:function(e,t,n){return e.unbind(t,n)},triggerEventHandler:function(e,t){return e.trigger(t)},detectEvent:function(t){var n,r,i,s,o;for(s=0,o=e.length;s<o;s++){r=e[s],i=r[0],n=r[1];if(t.is(i))return n}},detectInterface:function(e){var t,n,r,s,o;for(s=0,o=i.length;s<o;s++){n=i[s],r=n[0],t=n[1];if(e.is(r))return t}return"text"},detectOtherInterface:function(e){var n,r,i,s;for(i=0,s=t.length;i<s;i++){n=t[i];if(r=e.attr(n))return r}}}}()}).call(this)}),e.define("/mozart.coffee",function(e,t,n,r,i,s,o){(function(){var t,n,r,i,s,u,a,f,l,c={}.hasOwnProperty;t={version:"0.1.4",versionDate:new Date(2013,1,20)},f=[e("./collection"),e("./control"),e("./controller"),e("./data-index"),e("./dom-manager"),e("./events"),e("./handlebars"),e("./layout"),e("./model-instance"),e("./model-instancecollection"),e("./model-onetomanycollection"),e("./model-onetomanypolycollection"),e("./model-manytomanycollection"),e("./model-manytomanypolycollection"),e("./model-manytomanypolyreversecollection"),e("./model-ajax"),e("./model-localstorage"),e("./model"),e("./object"),e("./route"),e("./router"),e("./switch-view"),e("./util"),e("./view"),e("./cookies")];for(u=0,a=f.length;u<a;u++){i=f[u];for(s in i){if(!c.call(i,s))continue;r=i[s],t[s]=r}}n=e("./synapse").Synapse,n.hooks=[e("./synapse-mozart-hook"),e("./synapse-jquery")],o.module!=null?i.exports=t:((l=o.define)!=null?l.amd:void 0)!=null?define("mozart",t):(o.Mozart=t,o.Synapse=n,o.jQueryHook=e("./synapse-jquery"),o.MozartHook=e("./synapse-mozart-hook"))}).call(this)}),e("/mozart.coffee")})();
